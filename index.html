<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema RID - Login</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            box-sizing: border-box;
        }
        html, body {
            height: 100%;
            margin: 0;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-gray-100" style="background: linear-gradient(135deg, #d7d7d6 0%, #aba48f 100%);">
    <!-- Página de Login -->
    <div id="loginPage" class="min-h-full flex items-center justify-center px-4 py-12">
        <div class="max-w-md w-full bg-white rounded-2xl shadow-xl p-8">
            <div class="text-center mb-8">
                <h1 class="text-3xl font-bold mb-2" style="color: #c0991e;">Sistema RID</h1>
                <p style="color: #797877;">Faça login para continuar</p>
            </div>
            
            <form id="loginForm" class="space-y-6">
                <div>
                    <label for="loginCpf" class="block text-sm font-medium mb-2" style="color: #8c8487;">CPF</label>
                    <input type="text" id="loginCpf" maxlength="14" placeholder="000.000.000-00" 
                           class="w-full px-4 py-3 border rounded-lg outline-none transition" style="border-color: #aba48f; background-color: #d7d7d6;" onfocus="this.style.borderColor='#c0991e'; this.style.boxShadow='0 0 0 2px rgba(192, 153, 30, 0.2)'" onblur="this.style.borderColor='#aba48f'; this.style.boxShadow='none'">
                </div>
                
                <div>
                    <label for="loginPassword" class="block text-sm font-medium mb-2" style="color: #8c8487;">Senha</label>
                    <input type="password" id="loginPassword" placeholder="Digite sua senha"
                           class="w-full px-4 py-3 border rounded-lg outline-none transition" style="border-color: #aba48f; background-color: #d7d7d6;" onfocus="this.style.borderColor='#c0991e'; this.style.boxShadow='0 0 0 2px rgba(192, 153, 30, 0.2)'" onblur="this.style.borderColor='#aba48f'; this.style.boxShadow='none'">
                </div>
                
                <div id="loginError" class="hidden bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm"></div>
                
                <button type="submit" class="w-full text-white font-semibold py-3 rounded-lg transition duration-200 transform hover:scale-105" style="background-color: #c0991e;" onmouseover="this.style.backgroundColor='#a8821a'" onmouseout="this.style.backgroundColor='#c0991e'">
                    Entrar
                </button>
            </form>
            
            <div class="mt-6 text-center">
                <button id="showRegisterBtn" class="font-medium text-sm" style="color: #c0991e;" onmouseover="this.style.color='#a8821a'" onmouseout="this.style.color='#c0991e'">
                    Não tem cadastro? Cadastre-se aqui
                </button>
            </div>
        </div>
    </div>

    <!-- Página de Cadastro -->
    <div id="registerPage" class="hidden min-h-full flex items-center justify-center px-4 py-12">
        <div class="max-w-md w-full bg-white rounded-2xl shadow-xl p-8">
            <div class="text-center mb-8">
                <h1 class="text-3xl font-bold mb-2" style="color: #c0991e;">Sistema RID</h1>
                <p style="color: #797877;">Criar nova conta</p>
            </div>
            
            <form id="registerForm" class="space-y-6">
                <div>
                    <label for="registerName" class="block text-sm font-medium mb-2" style="color: #8c8487;">Nome Completo</label>
                    <input type="text" id="registerName" placeholder="Digite seu nome completo"
                           class="w-full px-4 py-3 border rounded-lg outline-none transition" style="border-color: #aba48f; background-color: #d7d7d6;" onfocus="this.style.borderColor='#c0991e'; this.style.boxShadow='0 0 0 2px rgba(192, 153, 30, 0.2)'" onblur="this.style.borderColor='#aba48f'; this.style.boxShadow='none'">
                </div>
                
                <div>
                    <label for="registerCpf" class="block text-sm font-medium mb-2" style="color: #8c8487;">CPF</label>
                    <input type="text" id="registerCpf" maxlength="14" placeholder="000.000.000-00"
                           class="w-full px-4 py-3 border rounded-lg outline-none transition" style="border-color: #aba48f; background-color: #d7d7d6;" onfocus="this.style.borderColor='#c0991e'; this.style.boxShadow='0 0 0 2px rgba(192, 153, 30, 0.2)'" onblur="this.style.borderColor='#aba48f'; this.style.boxShadow='none'">
                </div>
                
                <div>
                    <label for="registerPassword" class="block text-sm font-medium mb-2" style="color: #8c8487;">Senha</label>
                    <input type="password" id="registerPassword" placeholder="Crie uma senha"
                           class="w-full px-4 py-3 border rounded-lg outline-none transition" style="border-color: #aba48f; background-color: #d7d7d6;" onfocus="this.style.borderColor='#c0991e'; this.style.boxShadow='0 0 0 2px rgba(192, 153, 30, 0.2)'" onblur="this.style.borderColor='#aba48f'; this.style.boxShadow='none'">
                </div>
                
                <div>
                    <label for="registerConfirmPassword" class="block text-sm font-medium mb-2" style="color: #8c8487;">Confirmar Senha</label>
                    <input type="password" id="registerConfirmPassword" placeholder="Confirme sua senha"
                           class="w-full px-4 py-3 border rounded-lg outline-none transition" style="border-color: #aba48f; background-color: #d7d7d6;" onfocus="this.style.borderColor='#c0991e'; this.style.boxShadow='0 0 0 2px rgba(192, 153, 30, 0.2)'" onblur="this.style.borderColor='#aba48f'; this.style.boxShadow='none'">
                </div>
                
                <div id="registerError" class="hidden bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm"></div>
                
                <button type="submit" class="w-full text-white font-semibold py-3 rounded-lg transition duration-200 transform hover:scale-105" style="background-color: #c0991e;" onmouseover="this.style.backgroundColor='#a8821a'" onmouseout="this.style.backgroundColor='#c0991e'">
                    Cadastrar
                </button>
            </form>
            
            <div class="mt-6 text-center">
                <button id="showLoginBtn" class="font-medium text-sm" style="color: #c0991e;" onmouseover="this.style.color='#a8821a'" onmouseout="this.style.color='#c0991e'">
                    Já tem cadastro? Faça login
                </button>
            </div>
        </div>
    </div>

    <!-- Painel Administrador -->
    <div id="adminPanel" class="hidden min-h-full flex flex-col bg-gray-50">
        <header class="text-white shadow-lg" style="background-color: #8c8487;">
            <div class="max-w-7xl mx-auto px-4 py-4">
                <div class="flex items-center justify-between">
                    <h1 class="text-2xl font-bold">Sistema RID</h1>
                    <button id="logoutAdminBtn" class="px-4 py-2 rounded-lg transition" style="background-color: #c0991e;" onmouseover="this.style.backgroundColor='#a8821a'" onmouseout="this.style.backgroundColor='#c0991e'">
                        Sair
                    </button>
                </div>
            </div>
        </header>
        
        <nav class="bg-white shadow-md">
            <div class="max-w-7xl mx-auto px-4">
                <div class="flex space-x-1 py-3">
                    <button class="px-4 py-2 rounded-lg transition font-medium" style="color: #797877;" onmouseover="this.style.backgroundColor='#d7d7d6'; this.style.color='#c0991e'" onmouseout="this.style.backgroundColor='transparent'; this.style.color='#797877'">
                        Dashboard
                    </button>
                    <button id="ridListNavBtn" class="px-4 py-2 rounded-lg transition font-medium" style="color: #797877;" onmouseover="this.style.backgroundColor='#d7d7d6'; this.style.color='#c0991e'" onmouseout="this.style.backgroundColor='transparent'; this.style.color='#797877'">
                        RID's
                    </button>
                    <button id="employeeManagementNavBtn" class="px-4 py-2 rounded-lg transition font-medium" style="color: #797877;" onmouseover="this.style.backgroundColor='#d7d7d6'; this.style.color='#c0991e'" onmouseout="this.style.backgroundColor='transparent'; this.style.color='#797877'">
                        Funcionários
                    </button>
                    <button id="reportsNavBtn" class="px-4 py-2 rounded-lg transition font-medium" style="color: #797877;" onmouseover="this.style.backgroundColor='#d7d7d6'; this.style.color='#c0991e'" onmouseout="this.style.backgroundColor='transparent'; this.style.color='#797877'">
                        Relatórios
                    </button>
                </div>
            </div>
        </nav>
        
        <main class="flex-1 max-w-7xl w-full mx-auto px-4 py-8">
            <div class="flex flex-wrap gap-6 justify-center mb-8">
                <!-- Total de RIDs -->
                <div class="bg-white rounded-xl shadow-md p-6 flex items-center gap-4 min-w-64">
                    <div class="w-12 h-12 rounded-lg flex items-center justify-center" style="background-color: #d7d7d6;">
                        <svg class="w-6 h-6" style="stroke: #c0991e;" fill="none" viewBox="0 0 24 24" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                        </svg>
                    </div>
                    <div>
                        <h3 class="text-lg font-semibold mb-1" style="color: #8c8487;">Total de RIDs</h3>
                        <div id="totalRids" class="text-3xl font-bold" style="color: #c0991e;">0</div>
                    </div>
                </div>
                
                <!-- Vencidos -->
                <div class="bg-white rounded-xl shadow-md p-6 flex items-center gap-4 min-w-64">
                    <div class="w-12 h-12 rounded-lg flex items-center justify-center" style="background-color: #d7d7d6;">
                        <svg class="w-6 h-6" style="stroke: #c0991e;" fill="none" viewBox="0 0 24 24" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z" />
                        </svg>
                    </div>
                    <div>
                        <h3 class="text-lg font-semibold mb-1" style="color: #8c8487;">Vencidos</h3>
                        <div id="vencidosRids" class="text-3xl font-bold" style="color: #c0991e;">0</div>
                    </div>
                </div>
                
                <!-- Corrigidos -->
                <div class="bg-white rounded-xl shadow-md p-6 flex items-center gap-4 min-w-64">
                    <div class="w-12 h-12 rounded-lg flex items-center justify-center" style="background-color: #d7d7d6;">
                        <svg class="w-6 h-6" style="stroke: #c0991e;" fill="none" viewBox="0 0 24 24" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                    </div>
                    <div>
                        <h3 class="text-lg font-semibold mb-1" style="color: #8c8487;">Corrigidos</h3>
                        <div id="corrigidosRids" class="text-3xl font-bold" style="color: #c0991e;">0</div>
                    </div>
                </div>
                
                <!-- Em Andamento -->
                <div class="bg-white rounded-xl shadow-md p-6 flex items-center gap-4 min-w-64">
                    <div class="w-12 h-12 rounded-lg flex items-center justify-center" style="background-color: #d7d7d6;">
                        <svg class="w-6 h-6" style="stroke: #c0991e;" fill="none" viewBox="0 0 24 24" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
                        </svg>
                    </div>
                    <div>
                        <h3 class="text-lg font-semibold mb-1" style="color: #8c8487;">Em Andamento</h3>
                        <div id="emAndamentoRids" class="text-3xl font-bold" style="color: #c0991e;">0</div>
                    </div>
                </div>
                
            </div>
            
            <!-- Seção Superior - 2 Colunas -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                <!-- Top 3 Funcionários -->
                <div class="bg-white rounded-xl shadow-md p-6">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-xl font-bold" style="color: #8c8487;">Top 3 Funcionários com Mais RIDs</h3>
                        <button id="toggleTop3Filter" class="p-2 rounded-lg transition" style="background-color: #d7d7d6;" onmouseover="this.style.backgroundColor='#c0991e'; this.style.color='white'" onmouseout="this.style.backgroundColor='#d7d7d6'; this.style.color='inherit'" title="Filtrar por período">
                            <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707v4.586a1 1 0 01-.293.707L9 19.414V13.414a1 1 0 00-.293-.707L2.293 6.293A1 1 0 012 5.586V4z" />
                            </svg>
                        </button>
                    </div>
                    
                    <!-- Filtro de Período -->
                    <div id="top3FilterPanel" class="hidden mb-4 p-4 rounded-lg" style="background-color: #d7d7d6;">
                        <div class="flex items-center justify-center gap-8">
                            <!-- Filtro de Mês -->
                            <div class="flex items-center gap-3">
                                <button id="prevMonth" class="w-8 h-8 rounded-full flex items-center justify-center transition" style="background-color: #c0991e;" onmouseover="this.style.backgroundColor='#a8821a'" onmouseout="this.style.backgroundColor='#c0991e'">
                                    <svg class="w-4 h-4 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                                    </svg>
                                </button>
                                <span id="currentMonth" class="font-semibold text-lg min-w-32 text-center" style="color: #8c8487;">Outubro</span>
                                <button id="nextMonth" class="w-8 h-8 rounded-full flex items-center justify-center transition" style="background-color: #c0991e;" onmouseover="this.style.backgroundColor='#a8821a'" onmouseout="this.style.backgroundColor='#c0991e'">
                                    <svg class="w-4 h-4 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                                    </svg>
                                </button>
                            </div>
                            
                            <div class="w-px h-8" style="background-color: #aba48f;"></div>
                            
                            <!-- Filtro de Ano -->
                            <div class="flex items-center gap-3">
                                <button id="prevYear" class="w-8 h-8 rounded-full flex items-center justify-center transition" style="background-color: #c0991e;" onmouseover="this.style.backgroundColor='#a8821a'" onmouseout="this.style.backgroundColor='#c0991e'">
                                    <svg class="w-4 h-4 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                                    </svg>
                                </button>
                                <span id="currentYear" class="font-semibold text-lg min-w-16 text-center" style="color: #8c8487;">2025</span>
                                <button id="nextYear" class="w-8 h-8 rounded-full flex items-center justify-center transition" style="background-color: #c0991e;" onmouseover="this.style.backgroundColor='#a8821a'" onmouseout="this.style.backgroundColor='#c0991e'">
                                    <svg class="w-4 h-4 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="space-y-4">
                        <div class="flex items-center justify-between p-3 rounded-lg" style="background-color: #d7d7d6;">
                            <div class="flex items-center gap-3">
                                <div class="w-8 h-8 rounded-full flex items-center justify-center text-white font-bold" style="background-color: #c0991e;">1</div>
                                <div>
                                    <p class="font-semibold" style="color: #8c8487;">Maria Silva</p>
                                    <p class="text-sm" style="color: #797877;">Setor: Qualidade</p>
                                </div>
                            </div>
                            <div class="text-right">
                                <p class="font-bold text-lg" style="color: #c0991e;">34</p>
                                <p class="text-sm" style="color: #797877;">RIDs</p>
                            </div>
                        </div>
                        
                        <div class="flex items-center justify-between p-3 rounded-lg" style="background-color: #d7d7d6;">
                            <div class="flex items-center gap-3">
                                <div class="w-8 h-8 rounded-full flex items-center justify-center text-white font-bold" style="background-color: #aba48f;">2</div>
                                <div>
                                    <p class="font-semibold" style="color: #8c8487;">João Santos</p>
                                    <p class="text-sm" style="color: #797877;">Setor: Produção</p>
                                </div>
                            </div>
                            <div class="text-right">
                                <p class="font-bold text-lg" style="color: #c0991e;">28</p>
                                <p class="text-sm" style="color: #797877;">RIDs</p>
                            </div>
                        </div>
                        
                        <div class="flex items-center justify-between p-3 rounded-lg" style="background-color: #d7d7d6;">
                            <div class="flex items-center gap-3">
                                <div class="w-8 h-8 rounded-full flex items-center justify-center text-white font-bold" style="background-color: #797877;">3</div>
                                <div>
                                    <p class="font-semibold" style="color: #8c8487;">Ana Costa</p>
                                    <p class="text-sm" style="color: #797877;">Setor: Manutenção</p>
                                </div>
                            </div>
                            <div class="text-right">
                                <p class="font-bold text-lg" style="color: #c0991e;">22</p>
                                <p class="text-sm" style="color: #797877;">RIDs</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Ações Rápidas -->
                <div class="bg-white rounded-xl shadow-md p-6">
                    <h3 class="text-xl font-bold mb-4" style="color: #8c8487;">Ações Rápidas</h3>
                    <div class="space-y-4">
                        <button id="createRidBtn" class="w-full p-4 rounded-lg text-left transition duration-200 transform hover:scale-105 flex items-center gap-3" style="background-color: #d7d7d6;" onmouseover="this.style.backgroundColor='#c0991e'; this.style.color='white'" onmouseout="this.style.backgroundColor='#d7d7d6'; this.style.color='inherit'">
                            <svg class="w-6 h-6" style="stroke: #c0991e;" fill="none" viewBox="0 0 24 24" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4" />
                            </svg>
                            <div>
                                <p class="font-semibold" style="color: #8c8487;">Criar Novo RID</p>
                                <p class="text-sm" style="color: #797877;">Registrar nova ocorrência</p>
                            </div>
                        </button>
                        
                        <button id="generateReportBtn" class="w-full p-4 rounded-lg text-left transition duration-200 transform hover:scale-105 flex items-center gap-3" style="background-color: #d7d7d6;" onmouseover="this.style.backgroundColor='#c0991e'; this.style.color='white'" onmouseout="this.style.backgroundColor='#d7d7d6'; this.style.color='inherit'">
                            <svg class="w-6 h-6" style="stroke: #c0991e;" fill="none" viewBox="0 0 24 24" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                            </svg>
                            <div>
                                <p class="font-semibold" style="color: #8c8487;">Gerar Relatório</p>
                                <p class="text-sm" style="color: #797877;">Relatório mensal completo</p>
                            </div>
                        </button>
                        
                        <button id="quickManageUsersBtn" class="w-full p-4 rounded-lg text-left transition duration-200 transform hover:scale-105 flex items-center gap-3" style="background-color: #d7d7d6;" onmouseover="this.style.backgroundColor='#c0991e'; this.style.color='white'" onmouseout="this.style.backgroundColor='#d7d7d6'; this.style.color='inherit'">
                            <svg class="w-6 h-6" style="stroke: #c0991e;" fill="none" viewBox="0 0 24 24" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
                            </svg>
                            <div>
                                <p class="font-semibold" style="color: #8c8487;">Gerenciar Usuários</p>
                                <p class="text-sm" style="color: #797877;">Adicionar ou editar funcionários</p>
                            </div>
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Seção Tarefas e Lembretes -->
            <div class="mb-6">
                <div class="bg-white rounded-xl shadow-md p-6">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-xl font-bold" style="color: #8c8487;">Tarefas e Lembretes</h3>
                        <button id="addTaskBtn" class="p-2 rounded-lg transition" style="background-color: #d7d7d6;" onmouseover="this.style.backgroundColor='#c0991e'; this.style.color='white'" onmouseout="this.style.backgroundColor='#d7d7d6'; this.style.color='inherit'" title="Adicionar tarefa">
                            <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
                            </svg>
                        </button>
                    </div>
                    
                    <!-- Formulário para nova tarefa -->
                    <div id="taskForm" class="hidden mb-4 p-4 rounded-lg" style="background-color: #d7d7d6;">
                        <div class="space-y-3">
                            <input type="text" id="taskInput" placeholder="Digite sua tarefa ou lembrete..." 
                                   class="w-full px-3 py-2 border rounded-lg outline-none transition text-sm" style="border-color: #aba48f; background-color: white;" onfocus="this.style.borderColor='#c0991e'; this.style.boxShadow='0 0 0 2px rgba(192, 153, 30, 0.2)'" onblur="this.style.borderColor='#aba48f'; this.style.boxShadow='none'">
                            <div class="flex gap-2">
                                <button id="saveTaskBtn" class="px-4 py-2 rounded-lg text-white font-semibold transition text-sm" style="background-color: #c0991e;" onmouseover="this.style.backgroundColor='#a8821a'" onmouseout="this.style.backgroundColor='#c0991e'">
                                    Salvar
                                </button>
                                <button id="cancelTaskBtn" class="px-4 py-2 border rounded-lg font-semibold transition text-sm" style="border-color: #aba48f; color: #8c8487;" onmouseover="this.style.backgroundColor='#aba48f'; this.style.color='white'" onmouseout="this.style.backgroundColor='transparent'; this.style.color='#8c8487'">
                                    Cancelar
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Lista de tarefas -->
                    <div id="tasksList" class="space-y-3 max-h-80 overflow-y-auto">
                        <!-- Tarefas serão inseridas aqui via JavaScript -->
                    </div>
                    
                    <div id="noTasksMessage" class="text-center py-8">
                        <svg class="w-12 h-12 mx-auto mb-3" style="stroke: #aba48f;" fill="none" viewBox="0 0 24 24" stroke-width="1">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4" />
                        </svg>
                        <p style="color: #797877;">Nenhuma tarefa adicionada</p>
                        <p class="text-sm mt-1" style="color: #aba48f;">Clique no + para adicionar lembretes</p>
                    </div>
                </div>
            </div>
            

        </main>
    </div>

    <!-- Página Lista de RIDs -->
    <div id="ridListPage" class="hidden min-h-full flex flex-col bg-gray-50">
        <header class="text-white shadow-lg" style="background-color: #8c8487;">
            <div class="max-w-7xl mx-auto px-4 py-4">
                <div class="flex items-center justify-between">
                    <h1 class="text-2xl font-bold">Sistema RID - Lista de RIDs</h1>
                    <button id="logoutRidListBtn" class="px-4 py-2 rounded-lg transition" style="background-color: #c0991e;" onmouseover="this.style.backgroundColor='#a8821a'" onmouseout="this.style.backgroundColor='#c0991e'">
                        Sair
                    </button>
                </div>
            </div>
            

        </header>
        
        <nav class="bg-white shadow-md">
            <div class="max-w-7xl mx-auto px-4">
                <div class="flex space-x-1 py-3">
                    <button id="backToDashboardBtn" class="px-4 py-2 rounded-lg transition font-medium" style="color: #797877;" onmouseover="this.style.backgroundColor='#d7d7d6'; this.style.color='#c0991e'" onmouseout="this.style.backgroundColor='transparent'; this.style.color='#797877'">
                        Dashboard
                    </button>
                    <button class="px-4 py-2 rounded-lg transition font-medium" style="background-color: #c0991e; color: white;">
                        RID's
                    </button>
                    <button id="employeeManagementNavBtn" class="px-4 py-2 rounded-lg transition font-medium" style="color: #797877;" onmouseover="this.style.backgroundColor='#d7d7d6'; this.style.color='#c0991e'" onmouseout="this.style.backgroundColor='transparent'; this.style.color='#797877'">
                        Funcionários
                    </button>
                    <button id="reportsNavBtn" class="px-4 py-2 rounded-lg transition font-medium" style="color: #797877;" onmouseover="this.style.backgroundColor='#d7d7d6'; this.style.color='#c0991e'" onmouseout="this.style.backgroundColor='transparent'; this.style.color='#797877'">
                        Relatórios
                    </button>
                </div>
            </div>
            

        </nav>
        
        <main class="flex-1 max-w-7xl w-full mx-auto px-4 py-8">
            <div class="bg-white rounded-xl shadow-md overflow-hidden">
                <div class="p-6 border-b" style="border-color: #d7d7d6;">
                    <div class="flex items-center justify-between">
                        <h2 class="text-2xl font-bold" style="color: #c0991e;">Lista de RIDs</h2>
                        <div class="flex items-center gap-4">
                            <input type="text" id="searchRid" placeholder="Buscar RID..." 
                                   class="px-4 py-2 border rounded-lg outline-none transition" style="border-color: #aba48f; background-color: #d7d7d6;" onfocus="this.style.borderColor='#c0991e'; this.style.boxShadow='0 0 0 2px rgba(192, 153, 30, 0.2)'" onblur="this.style.borderColor='#aba48f'; this.style.boxShadow='none'">
                            <button id="createRidFromListBtn" class="px-4 py-2 rounded-lg text-white font-semibold transition" style="background-color: #c0991e;" onmouseover="this.style.backgroundColor='#a8821a'" onmouseout="this.style.backgroundColor='#c0991e'">
                                + Novo RID
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="overflow-x-auto">
                    <table class="w-full">
                        <thead style="background-color: #d7d7d6;">
                            <tr>
                                <th class="px-6 py-4 text-left text-sm font-semibold" style="color: #8c8487;">Número RID</th>
                                <th class="px-6 py-4 text-left text-sm font-semibold" style="color: #8c8487;">Emitente</th>
                                <th class="px-6 py-4 text-left text-sm font-semibold" style="color: #8c8487;">Setor</th>
                                <th class="px-6 py-4 text-left text-sm font-semibold" style="color: #8c8487;">Prioridade</th>
                                <th class="px-6 py-4 text-left text-sm font-semibold" style="color: #8c8487;">Status</th>
                                <th class="px-6 py-4 text-left text-sm font-semibold" style="color: #8c8487;">Data</th>
                                <th class="px-6 py-4 text-center text-sm font-semibold" style="color: #8c8487;">Ações</th>
                            </tr>
                        </thead>
                        <tbody id="ridTableBody">
                            <!-- RIDs serão inseridos aqui via JavaScript -->
                        </tbody>
                    </table>
                </div>
                
                <div id="noRidsMessage" class="hidden p-8 text-center">
                    <svg class="w-16 h-16 mx-auto mb-4" style="stroke: #aba48f;" fill="none" viewBox="0 0 24 24" stroke-width="1">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                    </svg>
                    <h3 class="text-lg font-semibold mb-2" style="color: #8c8487;">Nenhum RID encontrado</h3>
                    <p style="color: #797877;">Não há RIDs cadastrados no sistema ainda.</p>
                </div>
            </div>
            

        </main>
    </div>

    <!-- Modal Detalhes do RID -->
    <div id="ridDetailsModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
        <div class="bg-white rounded-2xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto">
            <div class="p-6 border-b" style="border-color: #d7d7d6;">
                <div class="flex items-center justify-between">
                    <h2 class="text-2xl font-bold" style="color: #c0991e;" id="ridDetailsTitle">Detalhes do RID</h2>
                    <button id="closeRidDetailsModal" class="w-8 h-8 rounded-full flex items-center justify-center transition" style="background-color: #d7d7d6;" onmouseover="this.style.backgroundColor='#c0991e'; this.style.color='white'" onmouseout="this.style.backgroundColor='#d7d7d6'; this.style.color='inherit'">
                        <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                </div>
            </div>
            

            
            <div class="p-6" id="ridDetailsContent">
                <!-- Conteúdo será inserido via JavaScript -->
            </div>
        </div>
    </div>

    <!-- Painel Funcionário -->
    <div id="employeePanel" class="hidden min-h-full flex flex-col bg-gray-50">
        <header class="text-white shadow-lg" style="background-color: #8c8487;">
            <div class="max-w-7xl mx-auto px-4 py-4">
                <div class="flex items-center justify-between">
                    <h1 class="text-2xl font-bold">Sistema RID</h1>
                    <button id="logoutEmployeeBtn" class="px-4 py-2 rounded-lg transition" style="background-color: #c0991e;" onmouseover="this.style.backgroundColor='#a8821a'" onmouseout="this.style.backgroundColor='#c0991e'">
                        Sair
                    </button>
                </div>
            </div>
            

        </header>
        
        <nav class="bg-white shadow-md">
            <div class="max-w-7xl mx-auto px-4">
                <div class="flex space-x-1 py-3">
                    <button class="px-4 py-2 rounded-lg transition font-medium" style="color: #797877;" onmouseover="this.style.backgroundColor='#d7d7d6'; this.style.color='#c0991e'" onmouseout="this.style.backgroundColor='transparent'; this.style.color='#797877'">
                        Dashboard
                    </button>
                    <button id="ridListNavBtn" class="px-4 py-2 rounded-lg transition font-medium" style="color: #797877;" onmouseover="this.style.backgroundColor='#d7d7d6'; this.style.color='#c0991e'" onmouseout="this.style.backgroundColor='transparent'; this.style.color='#797877'">
                        RID's
                    </button>
                    <button id="employeeManagementNavBtn" class="px-4 py-2 rounded-lg transition font-medium" style="color: #797877;" onmouseover="this.style.backgroundColor='#d7d7d6'; this.style.color='#c0991e'" onmouseout="this.style.backgroundColor='transparent'; this.style.color='#797877'">
                        Funcionários
                    </button>
                    <button id="reportsNavBtn" class="px-4 py-2 rounded-lg transition font-medium" style="color: #797877;" onmouseover="this.style.backgroundColor='#d7d7d6'; this.style.color='#c0991e'" onmouseout="this.style.backgroundColor='transparent'; this.style.color='#797877'">
                        Relatórios
                    </button>
                </div>
            </div>
        </nav>
        
        <main class="flex-1 max-w-7xl w-full mx-auto px-4 py-8">
            <div class="bg-white rounded-xl shadow-md p-8">
                <h2 class="text-2xl font-bold text-gray-800 mb-4">Painel do Funcionário</h2>
                <p class="text-gray-600">Bem-vindo ao painel de funcionários do Sistema RID.</p>
                <p class="text-gray-600 mt-2">Utilize o menu acima para navegar pelas funcionalidades.</p>
            </div>
        </main>
    </div>

    <!-- Página de Relatórios -->
    <div id="reportsPage" class="hidden min-h-full flex flex-col bg-gray-50">
        <header class="text-white shadow-lg" style="background-color: #8c8487;">
            <div class="max-w-7xl mx-auto px-4 py-4">
                <div class="flex items-center justify-between">
                    <h1 class="text-2xl font-bold">Sistema RID - Relatórios</h1>
                    <button id="logoutReportsBtn" class="px-4 py-2 rounded-lg transition" style="background-color: #c0991e;" onmouseover="this.style.backgroundColor='#a8821a'" onmouseout="this.style.backgroundColor='#c0991e'">
                        Sair
                    </button>
                </div>
            </div>
        </header>
        
        <nav class="bg-white shadow-md">
            <div class="max-w-7xl mx-auto px-4">
                <div class="flex space-x-1 py-3">
                    <button id="backToDashboardFromReportsBtn" class="px-4 py-2 rounded-lg transition font-medium" style="color: #797877;" onmouseover="this.style.backgroundColor='#d7d7d6'; this.style.color='#c0991e'" onmouseout="this.style.backgroundColor='transparent'; this.style.color='#797877'">
                        Dashboard
                    </button>
                    <button id="ridListNavFromReportsBtn" class="px-4 py-2 rounded-lg transition font-medium" style="color: #797877;" onmouseover="this.style.backgroundColor='#d7d7d6'; this.style.color='#c0991e'" onmouseout="this.style.backgroundColor='transparent'; this.style.color='#797877'">
                        RID's
                    </button>
                    <button id="employeeManagementNavFromReportsBtn" class="px-4 py-2 rounded-lg transition font-medium" style="color: #797877;" onmouseover="this.style.backgroundColor='#d7d7d6'; this.style.color='#c0991e'" onmouseout="this.style.backgroundColor='transparent'; this.style.color='#797877'">
                        Funcionários
                    </button>
                    <button class="px-4 py-2 rounded-lg transition font-medium" style="background-color: #c0991e; color: white;">
                        Relatórios
                    </button>
                </div>
            </div>
        </nav>
        
        <main class="flex-1 max-w-full w-full mx-auto px-4 py-8">
            <div class="bg-white rounded-xl shadow-md overflow-hidden">
                <div class="p-6 border-b" style="border-color: #d7d7d6;">
                    <div class="flex items-center justify-between">
                        <h2 class="text-2xl font-bold" style="color: #c0991e;">Relatório Completo de RIDs</h2>
                        <div class="flex items-center gap-4">
                            <button id="downloadReportBtn" class="px-4 py-2 rounded-lg text-white font-semibold transition" style="background-color: #c0991e;" onmouseover="this.style.backgroundColor='#a8821a'" onmouseout="this.style.backgroundColor='#c0991e'">
                                📥 Baixar CSV
                            </button>
                            <button id="refreshReportBtn" class="px-4 py-2 rounded-lg font-semibold transition" style="border: 1px solid #aba48f; color: #8c8487;" onmouseover="this.style.backgroundColor='#d7d7d6'" onmouseout="this.style.backgroundColor='transparent'">
                                🔄 Atualizar
                            </button>
                        </div>
                    </div>
                    <p class="mt-2" style="color: #797877;">Visualização completa de todos os RIDs cadastrados no sistema</p>
                </div>
                
                <div class="overflow-x-auto">
                    <table class="w-full text-sm">
                        <thead style="background-color: #d7d7d6;">
                            <tr>
                                <th class="px-4 py-3 text-left font-semibold" style="color: #8c8487; min-width: 120px;">Unidade</th>
                                <th class="px-4 py-3 text-left font-semibold" style="color: #8c8487; min-width: 100px;">RID Nº</th>
                                <th class="px-4 py-3 text-left font-semibold" style="color: #8c8487; min-width: 120px;">Data de Emissão</th>
                                <th class="px-4 py-3 text-left font-semibold" style="color: #8c8487; min-width: 150px;">Emitente</th>
                                <th class="px-4 py-3 text-left font-semibold" style="color: #8c8487; min-width: 180px;">Funcionário/Terceiro/Visitante</th>
                                <th class="px-4 py-3 text-left font-semibold" style="color: #8c8487; min-width: 200px;">Setor ou Empresa do Emitente</th>
                                <th class="px-4 py-3 text-left font-semibold" style="color: #8c8487; min-width: 250px;">Local do Incidente ou Desvio</th>
                                <th class="px-4 py-3 text-left font-semibold" style="color: #8c8487; min-width: 200px;">Gênese do Incidente ou Desvio</th>
                                <th class="px-4 py-3 text-left font-semibold" style="color: #8c8487; min-width: 150px;">Origem da Detecção</th>
                                <th class="px-4 py-3 text-left font-semibold" style="color: #8c8487; min-width: 300px;">Descrição</th>
                                <th class="px-4 py-3 text-left font-semibold" style="color: #8c8487; min-width: 150px;">Classificação do Risco</th>
                                <th class="px-4 py-3 text-left font-semibold" style="color: #8c8487; min-width: 250px;">Ação Imediata</th>
                                <th class="px-4 py-3 text-left font-semibold" style="color: #8c8487; min-width: 150px;">Ações Corretivas</th>
                                <th class="px-4 py-3 text-left font-semibold" style="color: #8c8487; min-width: 180px;">Responsável pelas Ações</th>
                                <th class="px-4 py-3 text-left font-semibold" style="color: #8c8487; min-width: 150px;">Prazo para Conclusão</th>
                                <th class="px-4 py-3 text-left font-semibold" style="color: #8c8487; min-width: 150px;">Data de Conclusão</th>
                                <th class="px-4 py-3 text-left font-semibold" style="color: #8c8487; min-width: 120px;">Status</th>
                                <th class="px-4 py-3 text-center font-semibold" style="color: #8c8487; min-width: 100px;">Ações</th>
                            </tr>
                        </thead>
                        <tbody id="reportsTableBody">
                            <!-- Dados serão inseridos aqui via JavaScript -->
                        </tbody>
                    </table>
                </div>
                
                <div id="noReportsMessage" class="hidden p-8 text-center">
                    <svg class="w-16 h-16 mx-auto mb-4" style="stroke: #aba48f;" fill="none" viewBox="0 0 24 24" stroke-width="1">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                    </svg>
                    <h3 class="text-lg font-semibold mb-2" style="color: #8c8487;">Nenhum RID encontrado</h3>
                    <p style="color: #797877;">Não há RIDs cadastrados no sistema para gerar relatório.</p>
                </div>
                
                <div class="p-6 border-t" style="border-color: #d7d7d6;">
                    <div class="flex items-center justify-between text-sm" style="color: #797877;">
                        <span id="reportSummary">Total de registros: 0</span>
                        <span>Gerado em: <span id="reportDate"></span></span>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Página Gerenciar Funcionários -->
    <div id="employeeManagementPage" class="hidden min-h-full flex flex-col bg-gray-50">
        <header class="text-white shadow-lg" style="background-color: #8c8487;">
            <div class="max-w-7xl mx-auto px-4 py-4">
                <div class="flex items-center justify-between">
                    <h1 class="text-2xl font-bold">Sistema RID - Gerenciar Funcionários</h1>
                    <button id="logoutEmployeeManagementBtn" class="px-4 py-2 rounded-lg transition" style="background-color: #c0991e;" onmouseover="this.style.backgroundColor='#a8821a'" onmouseout="this.style.backgroundColor='#c0991e'">
                        Sair
                    </button>
                </div>
            </div>
            

        </header>
        
        <nav class="bg-white shadow-md">
            <div class="max-w-7xl mx-auto px-4">
                <div class="flex space-x-1 py-3">
                    <button id="backToDashboardFromEmployeesBtn" class="px-4 py-2 rounded-lg transition font-medium" style="color: #797877;" onmouseover="this.style.backgroundColor='#d7d7d6'; this.style.color='#c0991e'" onmouseout="this.style.backgroundColor='transparent'; this.style.color='#797877'">
                        Dashboard
                    </button>
                    <button id="ridListNavFromEmployeesBtn" class="px-4 py-2 rounded-lg transition font-medium" style="color: #797877;" onmouseover="this.style.backgroundColor='#d7d7d6'; this.style.color='#c0991e'" onmouseout="this.style.backgroundColor='transparent'; this.style.color='#797877'">
                        RID's
                    </button>
                    <button class="px-4 py-2 rounded-lg transition font-medium" style="background-color: #c0991e; color: white;">
                        Funcionários
                    </button>
                    <button id="reportsNavBtn" class="px-4 py-2 rounded-lg transition font-medium" style="color: #797877;" onmouseover="this.style.backgroundColor='#d7d7d6'; this.style.color='#c0991e'" onmouseout="this.style.backgroundColor='transparent'; this.style.color='#797877'">
                        Relatórios
                    </button>
                </div>
            </div>
            

        </nav>
        
        <main class="flex-1 max-w-7xl w-full mx-auto px-4 py-8">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <!-- Lista de Administradores -->
                <div class="bg-white rounded-xl shadow-md overflow-hidden">
                    <div class="p-6 border-b" style="border-color: #d7d7d6;">
                        <div class="flex items-center gap-3">
                            <svg class="w-6 h-6" style="stroke: #c0991e;" fill="none" viewBox="0 0 24 24" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
                            </svg>
                            <h2 class="text-xl font-bold" style="color: #c0991e;">Administradores</h2>
                        </div>
                    </div>
                    
                    <div class="p-6">
                        <div id="adminsList" class="space-y-3">
                            <!-- Administradores serão inseridos aqui via JavaScript -->
                        </div>
                        
                        <div id="noAdminsMessage" class="hidden text-center py-8">
                            <svg class="w-12 h-12 mx-auto mb-3" style="stroke: #aba48f;" fill="none" viewBox="0 0 24 24" stroke-width="1">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
                            </svg>
                            <p style="color: #797877;">Nenhum funcionário promovido a administrador</p>
                        </div>
                    </div>
                </div>
                
                <!-- Lista de Funcionários -->
                <div class="bg-white rounded-xl shadow-md overflow-hidden">
                    <div class="p-6 border-b" style="border-color: #d7d7d6;">
                        <div class="flex items-center gap-3">
                            <svg class="w-6 h-6" style="stroke: #c0991e;" fill="none" viewBox="0 0 24 24" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
                            </svg>
                            <h2 class="text-xl font-bold" style="color: #c0991e;">Funcionários</h2>
                        </div>
                    </div>
                    
                    <div class="p-6">
                        <div id="employeesList" class="space-y-3">
                            <!-- Funcionários serão inseridos aqui via JavaScript -->
                        </div>
                        
                        <div id="noEmployeesMessage" class="hidden text-center py-8">
                            <svg class="w-12 h-12 mx-auto mb-3" style="stroke: #aba48f;" fill="none" viewBox="0 0 24 24" stroke-width="1">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
                            </svg>
                            <p style="color: #797877;">Nenhum funcionário cadastrado</p>
                        </div>
                    </div>
                </div>
            </div>
            

        </main>
    </div>

    <!-- Modal Gerenciamento Rápido de Usuários -->
    <div id="quickUserManagementModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
        <div class="bg-white rounded-2xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
            <div class="p-6 border-b" style="border-color: #d7d7d6;">
                <div class="flex items-center justify-between">
                    <h2 class="text-2xl font-bold" style="color: #c0991e;">Gerenciar Funcionários</h2>
                    <button id="closeQuickUserModal" class="w-8 h-8 rounded-full flex items-center justify-center transition" style="background-color: #d7d7d6;" onmouseover="this.style.backgroundColor='#c0991e'; this.style.color='white'" onmouseout="this.style.backgroundColor='#d7d7d6'; this.style.color='inherit'">
                        <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                </div>
            </div>
            

            
            <div class="p-6">
                <!-- Barra de Pesquisa -->
                <div class="mb-6">
                    <label for="searchEmployee" class="block text-sm font-medium mb-2" style="color: #8c8487;">Pesquisar Funcionário</label>
                    <input type="text" id="searchEmployee" placeholder="Digite o nome do funcionário..."
                           class="w-full px-4 py-3 border rounded-lg outline-none transition" style="border-color: #aba48f; background-color: #d7d7d6;" onfocus="this.style.borderColor='#c0991e'; this.style.boxShadow='0 0 0 2px rgba(192, 153, 30, 0.2)'" onblur="this.style.borderColor='#aba48f'; this.style.boxShadow='none'">
                </div>
                
                <!-- Lista de Funcionários -->
                <div class="space-y-3 max-h-96 overflow-y-auto" id="quickEmployeesList">
                    <!-- Funcionários serão inseridos aqui via JavaScript -->
                </div>
                
                <div id="noEmployeesFoundMessage" class="hidden text-center py-8">
                    <svg class="w-12 h-12 mx-auto mb-3" style="stroke: #aba48f;" fill="none" viewBox="0 0 24 24" stroke-width="1">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
                    </svg>
                    <p style="color: #797877;">Nenhum funcionário encontrado</p>
                </div>
            </div>
            

        </div>
    </div>

    <!-- Modal Criar RID -->
    <div id="ridModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
        <div class="bg-white rounded-2xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
            <div class="p-6 border-b" style="border-color: #d7d7d6;">
                <div class="flex items-center justify-between">
                    <h2 class="text-2xl font-bold" style="color: #c0991e;">Criar Novo RID</h2>
                    <button id="closeRidModal" class="w-8 h-8 rounded-full flex items-center justify-center transition" style="background-color: #d7d7d6;" onmouseover="this.style.backgroundColor='#c0991e'; this.style.color='white'" onmouseout="this.style.backgroundColor='#d7d7d6'; this.style.color='inherit'">
                        <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                </div>
            </div>
            

            
            <form id="ridForm" class="p-6 space-y-6">
                <div>
                    <label for="emitente" class="block text-sm font-medium mb-2" style="color: #8c8487;">Emitente</label>
                    <input type="text" id="emitente" placeholder="Digite o nome do emitente"
                           class="w-full px-4 py-3 border rounded-lg outline-none transition" style="border-color: #aba48f; background-color: #d7d7d6;" onfocus="this.style.borderColor='#c0991e'; this.style.boxShadow='0 0 0 2px rgba(192, 153, 30, 0.2)'" onblur="this.style.borderColor='#aba48f'; this.style.boxShadow='none'">
                </div>
                
                <div>
                    <label for="tipoContrato" class="block text-sm font-medium mb-2" style="color: #8c8487;">Tipo de Contrato</label>
                    <select id="tipoContrato" class="w-full px-4 py-3 border rounded-lg outline-none transition" style="border-color: #aba48f; background-color: #d7d7d6;" onfocus="this.style.borderColor='#c0991e'; this.style.boxShadow='0 0 0 2px rgba(192, 153, 30, 0.2)'" onblur="this.style.borderColor='#aba48f'; this.style.boxShadow='none'">
                        <option value="">Selecione o tipo de contrato</option>
                        <option value="funcionario">Funcionário</option>
                        <option value="terceiro-contratado">Terceiro Contratado</option>
                        <option value="terceiro-eventual">Terceiro Eventual</option>
                        <option value="visitante">Visitante</option>
                    </select>
                </div>
                
                <div>
                    <label for="unidade" class="block text-sm font-medium mb-2" style="color: #8c8487;">Unidade</label>
                    <select id="unidade" class="w-full px-4 py-3 border rounded-lg outline-none transition" style="border-color: #aba48f; background-color: #d7d7d6;" onfocus="this.style.borderColor='#c0991e'; this.style.boxShadow='0 0 0 2px rgba(192, 153, 30, 0.2)'" onblur="this.style.borderColor='#aba48f'; this.style.boxShadow='none'">
                        <option value="">Selecione a unidade</option>
                        <option value="calnamix">Calnamix</option>
                        <option value="calpi">Calpi</option>
                        <option value="caltins">Caltins</option>
                        <option value="formacal">Formacal</option>
                        <option value="gessotins">Gessotins</option>
                        <option value="imperio-caltins">Império Caltins</option>
                        <option value="minerax">Minerax</option>
                        <option value="minertins">Minertins</option>
                        <option value="natical">Natical</option>
                        <option value="nobretins">Nobretins</option>
                        <option value="supercal">Supercal</option>
                    </select>
                </div>
                
                <div>
                    <label for="setorEmitente" class="block text-sm font-medium mb-2" style="color: #8c8487;">Setor do Emitente</label>
                    <select id="setorEmitente" class="w-full px-4 py-3 border rounded-lg outline-none transition" style="border-color: #aba48f; background-color: #d7d7d6;" onfocus="this.style.borderColor='#c0991e'; this.style.boxShadow='0 0 0 2px rgba(192, 153, 30, 0.2)'" onblur="this.style.borderColor='#aba48f'; this.style.boxShadow='none'">
                        <option value="">Selecione o setor</option>
                        <option value="adm">ADM</option>
                        <option value="m-movel">M. MÓVEL</option>
                        <option value="m-fixa">M. FIXA</option>
                        <option value="m-eletrica">M. ELÉTRICA</option>
                        <option value="producao">PRODUÇÃO</option>
                        <option value="mina">MINA</option>
                    </select>
                </div>
                
                <div>
                    <label for="dataOcorrencia" class="block text-sm font-medium mb-2" style="color: #8c8487;">Data</label>
                    <input type="date" id="dataOcorrencia"
                           class="w-full px-4 py-3 border rounded-lg outline-none transition" style="border-color: #aba48f; background-color: #d7d7d6;" onfocus="this.style.borderColor='#c0991e'; this.style.boxShadow='0 0 0 2px rgba(192, 153, 30, 0.2)'" onblur="this.style.borderColor='#aba48f'; this.style.boxShadow='none'">
                </div>
                
                <div>
                    <label for="incidenteDesvio" class="block text-sm font-medium mb-2" style="color: #8c8487;">Incidente ou Desvios</label>
                    <select id="incidenteDesvio" class="w-full px-4 py-3 border rounded-lg outline-none transition" style="border-color: #aba48f; background-color: #d7d7d6;" onfocus="this.style.borderColor='#c0991e'; this.style.boxShadow='0 0 0 2px rgba(192, 153, 30, 0.2)'" onblur="this.style.borderColor='#aba48f'; this.style.boxShadow='none'">
                        <option value="">Selecione o tipo</option>
                        <option value="condicao-risco">Condição de Risco</option>
                        <option value="desvio-comportamental">Desvio Comportamental</option>
                        <option value="dano-material">Dano Material</option>
                        <option value="quase-acidente">Quase Acidente</option>
                    </select>
                </div>
                
                <div>
                    <label for="localOcorrencia" class="block text-sm font-medium mb-2" style="color: #8c8487;">Local da Ocorrência</label>
                    <textarea id="localOcorrencia" rows="3" placeholder="Descreva o local da ocorrência"
                              class="w-full px-4 py-3 border rounded-lg outline-none transition resize-none" style="border-color: #aba48f; background-color: #d7d7d6;" onfocus="this.style.borderColor='#c0991e'; this.style.boxShadow='0 0 0 2px rgba(192, 153, 30, 0.2)'" onblur="this.style.borderColor='#aba48f'; this.style.boxShadow='none'"></textarea>
                </div>
                
                <div>
                    <label for="descricaoOcorrencia" class="block text-sm font-medium mb-2" style="color: #8c8487;">Descrição da Ocorrência</label>
                    <textarea id="descricaoOcorrencia" rows="4" placeholder="Descreva detalhadamente o que aconteceu"
                              class="w-full px-4 py-3 border rounded-lg outline-none transition resize-none" style="border-color: #aba48f; background-color: #d7d7d6;" onfocus="this.style.borderColor='#c0991e'; this.style.boxShadow='0 0 0 2px rgba(192, 153, 30, 0.2)'" onblur="this.style.borderColor='#aba48f'; this.style.boxShadow='none'"></textarea>
                </div>
                
                <div>
                    <label for="acaoImediata" class="block text-sm font-medium mb-2" style="color: #8c8487;">Ação Imediata</label>
                    <textarea id="acaoImediata" rows="3" placeholder="Descreva a ação imediata tomada"
                              class="w-full px-4 py-3 border rounded-lg outline-none transition resize-none" style="border-color: #aba48f; background-color: #d7d7d6;" onfocus="this.style.borderColor='#c0991e'; this.style.boxShadow='0 0 0 2px rgba(192, 153, 30, 0.2)'" onblur="this.style.borderColor='#aba48f'; this.style.boxShadow='none'"></textarea>
                </div>
                
                <div>
                    <label for="prioridade" class="block text-sm font-medium mb-2" style="color: #8c8487;">Prioridade</label>
                    <select id="prioridade" class="w-full px-4 py-3 border rounded-lg outline-none transition" style="border-color: #aba48f; background-color: #d7d7d6;" onfocus="this.style.borderColor='#c0991e'; this.style.boxShadow='0 0 0 2px rgba(192, 153, 30, 0.2)'" onblur="this.style.borderColor='#aba48f'; this.style.boxShadow='none'">
                        <option value="">Selecione a prioridade</option>
                        <option value="Crítica">Crítica</option>
                        <option value="Alta">Alta</option>
                        <option value="Média">Média</option>
                        <option value="Baixa">Baixa</option>
                    </select>
                </div>
                
                <div>
                    <label for="status" class="block text-sm font-medium mb-2" style="color: #8c8487;">Status</label>
                    <select id="status" class="w-full px-4 py-3 border rounded-lg outline-none transition" style="border-color: #aba48f; background-color: #d7d7d6;" onfocus="this.style.borderColor='#c0991e'; this.style.boxShadow='0 0 0 2px rgba(192, 153, 30, 0.2)'" onblur="this.style.borderColor='#aba48f'; this.style.boxShadow='none'">
                        <option value="">Selecione o status</option>
                        <option value="vencido">Vencido</option>
                        <option value="corrigido">Corrigido</option>
                    </select>
                </div>
                
                <div id="ridError" class="hidden bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm"></div>
                <div id="ridSuccess" class="hidden bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg text-sm"></div>
                
                <div class="flex gap-4 pt-4">
                    <button type="button" id="cancelRidBtn" class="flex-1 px-6 py-3 border rounded-lg font-semibold transition" style="border-color: #aba48f; color: #8c8487;" onmouseover="this.style.backgroundColor='#d7d7d6'" onmouseout="this.style.backgroundColor='transparent'">
                        Cancelar
                    </button>
                    <button type="submit" class="flex-1 text-white font-semibold py-3 rounded-lg transition duration-200 transform hover:scale-105" style="background-color: #c0991e;" onmouseover="this.style.backgroundColor='#a8821a'" onmouseout="this.style.backgroundColor='#c0991e'">
                        Salvar RID
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script>
        const ADMIN_CPF = '07050776165';
        const ADMIN_PASSWORD = '611969';
        
        // Top 3 Filter Event Listeners
        document.getElementById('toggleTop3Filter').addEventListener('click', function() {
            const filterPanel = document.getElementById('top3FilterPanel');
            filterPanel.classList.toggle('hidden');
        });
        
        document.getElementById('prevMonth').addEventListener('click', function() {
            top3FilterMonth--;
            if (top3FilterMonth < 0) {
                top3FilterMonth = 11;
                top3FilterYear--;
                if (top3FilterYear < 2024) top3FilterYear = 2024; // Minimum year
            }
            updateTop3FilterDisplay();
            updateTop3Employees();
        });
        
        document.getElementById('nextMonth').addEventListener('click', function() {
            top3FilterMonth++;
            if (top3FilterMonth > 11) {
                top3FilterMonth = 0;
                top3FilterYear++;
                if (top3FilterYear > 2045) top3FilterYear = 2045; // Maximum year
            }
            updateTop3FilterDisplay();
            updateTop3Employees();
        });
        
        document.getElementById('prevYear').addEventListener('click', function() {
            top3FilterYear--;
            if (top3FilterYear < 2024) top3FilterYear = 2024; // Minimum year
            updateTop3FilterDisplay();
            updateTop3Employees();
        });
        
        document.getElementById('nextYear').addEventListener('click', function() {
            top3FilterYear++;
            if (top3FilterYear > 2045) top3FilterYear = 2045; // Maximum year
            updateTop3FilterDisplay();
            updateTop3Employees();
        });
        
        function updateTop3FilterDisplay() {
            document.getElementById('currentMonth').textContent = monthNames[top3FilterMonth];
            document.getElementById('currentYear').textContent = top3FilterYear;
        }
        
        // Initialize sample data if not exists
        if (!localStorage.getItem('ridUsers')) {
            const sampleUsers = {
                '12345678901': { name: 'Maria Silva Santos', password: '123456', type: 'employee', setor: 'Produção' },
                '98765432100': { name: 'João Carlos Oliveira', password: '123456', type: 'employee', setor: 'Mina' },
                '11122233344': { name: 'Ana Paula Costa', password: '123456', type: 'employee', setor: 'M. Elétrica' },
                '55566677788': { name: 'Carlos Eduardo Lima', password: '123456', type: 'employee', setor: 'M. Móvel' },
                '99988877766': { name: 'Fernanda Rodrigues', password: '123456', type: 'employee', setor: 'ADM' }
            };
            localStorage.setItem('ridUsers', JSON.stringify(sampleUsers));
        }
        
        if (!localStorage.getItem('rids')) {
            const sampleRids = [
                // RIDs antigos (2024)
                {
                    id: 1640995200000,
                    ridNumber: 'RID-00001',
                    emitente: 'Maria Silva Santos',
                    tipoContrato: 'funcionario',
                    unidade: 'caltins',
                    setorEmitente: 'producao',
                    dataOcorrencia: '2024-01-15',
                    incidenteDesvio: 'condicao-risco',
                    localOcorrencia: 'Área de produção, próximo à esteira transportadora principal',
                    descricaoOcorrencia: 'Identificado vazamento de óleo hidráulico no equipamento de britagem, criando risco de escorregamento para os operadores.',
                    acaoImediata: 'Área isolada imediatamente, limpeza do óleo derramado e manutenção preventiva programada.',
                    status: 'corrigido',
                    prioridade: 'Alta',
                    dataCriacao: '2024-01-15T08:30:00.000Z',
                    criador: 'maria.silva'
                },
                {
                    id: 1641081600000,
                    ridNumber: 'RID-00002',
                    emitente: 'João Carlos Oliveira',
                    tipoContrato: 'funcionario',
                    unidade: 'minerax',
                    setorEmitente: 'mina',
                    dataOcorrencia: '2024-01-18',
                    incidenteDesvio: 'quase-acidente',
                    localOcorrencia: 'Frente de lavra, setor norte da mina',
                    descricaoOcorrencia: 'Operador quase foi atingido por fragmento de rocha durante operação de desmonte. O fragmento passou próximo ao operador que estava fora da área de segurança.',
                    acaoImediata: 'Paralisação imediata das atividades, revisão dos procedimentos de segurança e retreinamento da equipe.',
                    status: 'vencido',
                    prioridade: 'Crítica',
                    dataCriacao: '2024-01-18T14:15:00.000Z',
                    criador: 'joao.oliveira'
                },
                {
                    id: 1641168000000,
                    ridNumber: 'RID-00003',
                    emitente: 'Ana Paula Costa',
                    tipoContrato: 'funcionario',
                    unidade: 'formacal',
                    setorEmitente: 'm-eletrica',
                    dataOcorrencia: '2024-01-20',
                    incidenteDesvio: 'desvio-comportamental',
                    localOcorrencia: 'Subestação elétrica, painel de controle principal',
                    descricaoOcorrencia: 'Funcionário terceirizado realizando manutenção sem utilizar os EPIs obrigatórios (luvas isolantes e capacete classe B).',
                    acaoImediata: 'Interrupção imediata do serviço, fornecimento dos EPIs adequados e orientação sobre procedimentos de segurança.',
                    status: 'corrigido',
                    prioridade: 'Média',
                    dataCriacao: '2024-01-20T10:45:00.000Z',
                    criador: 'ana.costa'
                },
                {
                    id: 1641254400000,
                    ridNumber: 'RID-00004',
                    emitente: 'Carlos Eduardo Lima',
                    tipoContrato: 'terceiro-contratado',
                    unidade: 'supercal',
                    setorEmitente: 'm-movel',
                    dataOcorrencia: '2024-01-22',
                    incidenteDesvio: 'dano-material',
                    localOcorrencia: 'Pátio de manobras, próximo ao galpão de manutenção',
                    descricaoOcorrencia: 'Colisão entre empilhadeira e caminhão durante manobra de carregamento, resultando em danos na lateral do caminhão e avaria no garfo da empilhadeira.',
                    acaoImediata: 'Isolamento da área, verificação de feridos (nenhum), remoção dos equipamentos danificados e acionamento do seguro.',
                    status: 'vencido',
                    prioridade: 'Alta',
                    dataCriacao: '2024-01-22T16:20:00.000Z',
                    criador: 'carlos.lima'
                },
                {
                    id: 1641340800000,
                    ridNumber: 'RID-00005',
                    emitente: 'Fernanda Rodrigues',
                    tipoContrato: 'funcionario',
                    unidade: 'gessotins',
                    setorEmitente: 'adm',
                    dataOcorrencia: '2024-01-25',
                    incidenteDesvio: 'condicao-risco',
                    localOcorrencia: 'Escritório administrativo, segundo andar',
                    descricaoOcorrencia: 'Identificado problema na instalação elétrica com fios expostos próximo às estações de trabalho, oferecendo risco de choque elétrico.',
                    acaoImediata: 'Desligamento do circuito elétrico afetado, isolamento da área e contato com eletricista para reparo emergencial.',
                    status: 'corrigido',
                    prioridade: 'Alta',
                    dataCriacao: '2024-01-25T09:10:00.000Z',
                    criador: 'fernanda.rodrigues'
                },
                {
                    id: 1641427200000,
                    ridNumber: 'RID-00006',
                    emitente: 'Maria Silva Santos',
                    tipoContrato: 'funcionario',
                    unidade: 'natical',
                    setorEmitente: 'm-fixa',
                    dataOcorrencia: '2024-01-28',
                    incidenteDesvio: 'desvio-comportamental',
                    localOcorrencia: 'Oficina de manutenção, bancada de trabalho',
                    descricaoOcorrencia: 'Mecânico utilizando ferramenta inadequada (chave de fenda como alavanca) para remoção de peça, contrariando procedimento padrão.',
                    acaoImediata: 'Orientação imediata sobre uso correto de ferramentas, disponibilização da ferramenta adequada e registro em ficha de treinamento.',
                    status: 'corrigido',
                    prioridade: 'Média',
                    dataCriacao: '2024-01-28T13:30:00.000Z',
                    criador: 'maria.silva'
                },
                // RIDs de outubro 2025 (mês atual)
                {
                    id: 1729900800000,
                    ridNumber: 'RID-00007',
                    emitente: 'Maria Silva Santos',
                    tipoContrato: 'funcionario',
                    unidade: 'caltins',
                    setorEmitente: 'producao',
                    dataOcorrencia: '2025-10-02',
                    incidenteDesvio: 'condicao-risco',
                    localOcorrencia: 'Linha de produção 2, próximo ao britador secundário',
                    descricaoOcorrencia: 'Identificada proteção danificada no equipamento de britagem, expondo partes móveis e criando risco de acidentes.',
                    acaoImediata: 'Equipamento desligado imediatamente, área isolada e manutenção corretiva programada para substituição da proteção.',
                    status: 'corrigido',
                    prioridade: 'Alta',
                    dataCriacao: '2025-10-02T09:15:00.000Z',
                    criador: 'maria.silva'
                },
                {
                    id: 1730073600000,
                    ridNumber: 'RID-00008',
                    emitente: 'Maria Silva Santos',
                    tipoContrato: 'funcionario',
                    unidade: 'formacal',
                    setorEmitente: 'producao',
                    dataOcorrencia: '2025-10-04',
                    incidenteDesvio: 'desvio-comportamental',
                    localOcorrencia: 'Área de ensacamento, esteira transportadora',
                    descricaoOcorrencia: 'Operador removendo material da esteira com equipamento em funcionamento, sem seguir procedimento de parada segura.',
                    acaoImediata: 'Orientação imediata sobre procedimentos de segurança, treinamento de reciclagem agendado.',
                    status: 'corrigido',
                    prioridade: 'Média',
                    dataCriacao: '2025-10-04T14:30:00.000Z',
                    criador: 'maria.silva'
                },
                {
                    id: 1730246400000,
                    ridNumber: 'RID-00009',
                    emitente: 'João Carlos Oliveira',
                    tipoContrato: 'funcionario',
                    unidade: 'minerax',
                    setorEmitente: 'mina',
                    dataOcorrencia: '2025-10-06',
                    incidenteDesvio: 'quase-acidente',
                    localOcorrencia: 'Bancada 15, frente de lavra oeste',
                    descricaoOcorrencia: 'Caminhão fora de estrada perdeu controle em descida íngreme, quase colidindo com equipamento de perfuração.',
                    acaoImediata: 'Paralisação das atividades na área, revisão das condições da via de acesso e manutenção preventiva dos freios.',
                    status: 'vencido',
                    prioridade: 'Crítica',
                    dataCriacao: '2025-10-06T11:45:00.000Z',
                    criador: 'joao.oliveira'
                },
                {
                    id: 1730419200000,
                    ridNumber: 'RID-00010',
                    emitente: 'João Carlos Oliveira',
                    tipoContrato: 'funcionario',
                    unidade: 'supercal',
                    setorEmitente: 'mina',
                    dataOcorrencia: '2025-10-08',
                    incidenteDesvio: 'dano-material',
                    localOcorrencia: 'Praça de britagem, transportador de correia TC-03',
                    descricaoOcorrencia: 'Rompimento da correia transportadora devido ao acúmulo de material, causando parada não programada da produção.',
                    acaoImediata: 'Limpeza da área, substituição da correia danificada e ajuste no sistema de controle de fluxo.',
                    status: 'corrigido',
                    prioridade: 'Alta',
                    dataCriacao: '2025-10-08T16:20:00.000Z',
                    criador: 'joao.oliveira'
                },
                {
                    id: 1730592000000,
                    ridNumber: 'RID-00011',
                    emitente: 'Ana Paula Costa',
                    tipoContrato: 'funcionario',
                    unidade: 'gessotins',
                    setorEmitente: 'm-eletrica',
                    dataOcorrencia: '2025-10-10',
                    incidenteDesvio: 'condicao-risco',
                    localOcorrencia: 'Casa de força, painel elétrico principal',
                    descricaoOcorrencia: 'Aquecimento excessivo em conexões elétricas do painel principal, com risco de incêndio.',
                    acaoImediata: 'Desligamento do circuito afetado, reaperto das conexões e programação de termografia preventiva.',
                    status: 'corrigido',
                    prioridade: 'Alta',
                    dataCriacao: '2025-10-10T08:10:00.000Z',
                    criador: 'ana.costa'
                },
                {
                    id: 1730764800000,
                    ridNumber: 'RID-00012',
                    emitente: 'Carlos Eduardo Lima',
                    tipoContrato: 'terceiro-contratado',
                    unidade: 'natical',
                    setorEmitente: 'm-movel',
                    dataOcorrencia: '2025-10-12',
                    incidenteDesvio: 'desvio-comportamental',
                    localOcorrencia: 'Oficina mecânica, área de soldas',
                    descricaoOcorrencia: 'Soldador executando serviço sem utilizar máscara de proteção adequada, expondo-se à radiação.',
                    acaoImediata: 'Interrupção imediata do serviço, fornecimento de EPI adequado e orientação sobre riscos da soldagem.',
                    status: 'corrigido',
                    prioridade: 'Média',
                    dataCriacao: '2025-10-12T13:25:00.000Z',
                    criador: 'carlos.lima'
                },
                {
                    id: 1730937600000,
                    ridNumber: 'RID-00013',
                    emitente: 'Fernanda Rodrigues',
                    tipoContrato: 'funcionario',
                    unidade: 'calnamix',
                    setorEmitente: 'adm',
                    dataOcorrencia: '2025-10-14',
                    incidenteDesvio: 'condicao-risco',
                    localOcorrencia: 'Almoxarifado central, corredor principal',
                    descricaoOcorrencia: 'Empilhamento inadequado de materiais em altura excessiva, criando risco de desabamento.',
                    acaoImediata: 'Reorganização imediata do estoque, treinamento da equipe sobre limites de empilhamento.',
                    status: 'corrigido',
                    prioridade: 'Média',
                    dataCriacao: '2025-10-14T10:40:00.000Z',
                    criador: 'fernanda.rodrigues'
                },
                {
                    id: 1731110400000,
                    ridNumber: 'RID-00014',
                    emitente: 'Maria Silva Santos',
                    tipoContrato: 'funcionario',
                    unidade: 'minerax',
                    setorEmitente: 'producao',
                    dataOcorrencia: '2025-10-16',
                    incidenteDesvio: 'quase-acidente',
                    localOcorrencia: 'Pátio de estocagem, pilha de minério',
                    descricaoOcorrencia: 'Operador de carregadeira quase foi atingido por deslizamento de material da pilha durante operação de carregamento.',
                    acaoImediata: 'Paralisação da operação, reconfiguração da pilha e revisão dos procedimentos de aproximação.',
                    status: 'vencido',
                    prioridade: 'Crítica',
                    dataCriacao: '2025-10-16T15:55:00.000Z',
                    criador: 'maria.silva'
                },
                {
                    id: 1731283200000,
                    ridNumber: 'RID-00015',
                    emitente: 'João Carlos Oliveira',
                    tipoContrato: 'funcionario',
                    unidade: 'caltins',
                    setorEmitente: 'mina',
                    dataOcorrencia: '2025-10-18',
                    incidenteDesvio: 'dano-material',
                    localOcorrencia: 'Frente de lavra, equipamento de perfuração',
                    descricaoOcorrencia: 'Quebra da haste de perfuração devido ao contato com material mais duro que o esperado.',
                    acaoImediata: 'Substituição da haste danificada, análise geológica da área e ajuste dos parâmetros de perfuração.',
                    status: 'corrigido',
                    prioridade: 'Média',
                    dataCriacao: '2025-10-18T12:15:00.000Z',
                    criador: 'joao.oliveira'
                },
                {
                    id: 1731456000000,
                    ridNumber: 'RID-00016',
                    emitente: 'Ana Paula Costa',
                    tipoContrato: 'funcionario',
                    unidade: 'formacal',
                    setorEmitente: 'm-eletrica',
                    dataOcorrencia: '2025-10-20',
                    incidenteDesvio: 'condicao-risco',
                    localOcorrencia: 'Subestação 2, transformador principal',
                    descricaoOcorrencia: 'Vazamento de óleo isolante do transformador, criando risco ambiental e de incêndio.',
                    acaoImediata: 'Contenção do vazamento, limpeza da área contaminada e programação de manutenção corretiva urgente.',
                    status: 'em-andamento',
                    prioridade: 'Alta',
                    dataCriacao: '2025-10-20T09:30:00.000Z',
                    criador: 'ana.costa'
                },
                {
                    id: 1731628800000,
                    ridNumber: 'RID-00017',
                    emitente: 'Maria Silva Santos',
                    tipoContrato: 'funcionario',
                    unidade: 'supercal',
                    setorEmitente: 'producao',
                    dataOcorrencia: '2025-10-22',
                    incidenteDesvio: 'desvio-comportamental',
                    localOcorrencia: 'Área de carregamento, baia 3',
                    descricaoOcorrencia: 'Motorista de caminhão não utilizando cinto de segurança durante operação de carregamento.',
                    acaoImediata: 'Orientação imediata sobre uso obrigatório de cinto, registro em ficha de segurança do motorista.',
                    status: 'corrigido',
                    prioridade: 'Baixa',
                    dataCriacao: '2025-10-22T14:45:00.000Z',
                    criador: 'maria.silva'
                },
                {
                    id: 1731801600000,
                    ridNumber: 'RID-00018',
                    emitente: 'Carlos Eduardo Lima',
                    tipoContrato: 'terceiro-contratado',
                    unidade: 'nobretins',
                    setorEmitente: 'm-movel',
                    dataOcorrencia: '2025-10-24',
                    incidenteDesvio: 'dano-material',
                    localOcorrencia: 'Oficina de manutenção, torno mecânico',
                    descricaoOcorrencia: 'Quebra da ferramenta de corte durante usinagem de peça, causando danos ao equipamento.',
                    acaoImediata: 'Parada do equipamento, substituição da ferramenta e verificação de possíveis danos internos.',
                    status: 'corrigido',
                    prioridade: 'Média',
                    dataCriacao: '2025-10-24T11:20:00.000Z',
                    criador: 'carlos.lima'
                },
                {
                    id: 1731974400000,
                    ridNumber: 'RID-00019',
                    emitente: 'João Carlos Oliveira',
                    tipoContrato: 'funcionario',
                    unidade: 'gessotins',
                    setorEmitente: 'mina',
                    dataOcorrencia: '2025-10-26',
                    incidenteDesvio: 'condicao-risco',
                    localOcorrencia: 'Rampa de acesso, curva 7',
                    descricaoOcorrencia: 'Erosão na lateral da rampa de acesso criando risco de desmoronamento e bloqueio da via.',
                    acaoImediata: 'Sinalização da área de risco, desvio temporário do tráfego e programação de obras de contenção.',
                    status: 'em-andamento',
                    prioridade: 'Alta',
                    dataCriacao: '2025-10-26T16:10:00.000Z',
                    criador: 'joao.oliveira'
                },
                // RID da semana atual (apenas 27/10/2025 - hoje)
                {
                    id: 1732060800000,
                    ridNumber: 'RID-00020',
                    emitente: 'Maria Silva Santos',
                    tipoContrato: 'funcionario',
                    unidade: 'caltins',
                    setorEmitente: 'producao',
                    dataOcorrencia: '2025-10-27',
                    incidenteDesvio: 'desvio-comportamental',
                    localOcorrencia: 'Área de carregamento, baia 1',
                    descricaoOcorrencia: 'Operador não utilizando protetor auricular em área com ruído acima de 85dB.',
                    acaoImediata: 'Fornecimento imediato de EPI adequado e orientação sobre riscos auditivos.',
                    status: 'corrigido',
                    prioridade: 'Média',
                    dataCriacao: '2025-10-27T08:30:00.000Z',
                    criador: 'maria.silva'
                }
            ];
            localStorage.setItem('rids', JSON.stringify(sampleRids));
        }
        
        const users = JSON.parse(localStorage.getItem('ridUsers') || '{}');
        
        function formatCPF(value) {
            value = value.replace(/\D/g, '');
            value = value.replace(/(\d{3})(\d)/, '$1.$2');
            value = value.replace(/(\d{3})(\d)/, '$1.$2');
            value = value.replace(/(\d{3})(\d{1,2})$/, '$1-$2');
            return value;
        }
        
        function cleanCPF(cpf) {
            return cpf.replace(/\D/g, '');
        }
        
        document.getElementById('loginCpf').addEventListener('input', function(e) {
            e.target.value = formatCPF(e.target.value);
        });
        
        document.getElementById('registerCpf').addEventListener('input', function(e) {
            e.target.value = formatCPF(e.target.value);
        });
        
        document.getElementById('showRegisterBtn').addEventListener('click', function() {
            document.getElementById('loginPage').classList.add('hidden');
            document.getElementById('registerPage').classList.remove('hidden');
        });
        
        document.getElementById('showLoginBtn').addEventListener('click', function() {
            document.getElementById('registerPage').classList.add('hidden');
            document.getElementById('loginPage').classList.remove('hidden');
        });
        
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const cpf = cleanCPF(document.getElementById('loginCpf').value);
            const password = document.getElementById('loginPassword').value;
            const errorDiv = document.getElementById('loginError');
            
            if (!cpf || !password) {
                errorDiv.textContent = 'Por favor, preencha todos os campos.';
                errorDiv.classList.remove('hidden');
                return;
            }
            
            if (cpf === ADMIN_CPF && password === ADMIN_PASSWORD) {
                errorDiv.classList.add('hidden');
                document.getElementById('loginPage').classList.add('hidden');
                document.getElementById('adminPanel').classList.remove('hidden');
                updateDashboardStats();
            } else if (users[cpf] && users[cpf].password === password) {
                errorDiv.classList.add('hidden');
                document.getElementById('loginPage').classList.add('hidden');
                
                // Check if user is promoted admin or regular employee
                if (users[cpf].type === 'admin') {
                    document.getElementById('adminPanel').classList.remove('hidden');
                    updateDashboardStats();
                } else {
                    document.getElementById('employeePanel').classList.remove('hidden');
                }
            } else {
                errorDiv.textContent = 'CPF ou senha incorretos.';
                errorDiv.classList.remove('hidden');
            }
        });
        
        document.getElementById('registerForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const name = document.getElementById('registerName').value.trim();
            const cpf = cleanCPF(document.getElementById('registerCpf').value);
            const password = document.getElementById('registerPassword').value;
            const confirmPassword = document.getElementById('registerConfirmPassword').value;
            const errorDiv = document.getElementById('registerError');
            
            if (!name || !cpf || !password || !confirmPassword) {
                errorDiv.textContent = 'Por favor, preencha todos os campos.';
                errorDiv.classList.remove('hidden');
                return;
            }
            
            if (password !== confirmPassword) {
                errorDiv.textContent = 'As senhas não coincidem.';
                errorDiv.classList.remove('hidden');
                return;
            }
            
            if (cpf === ADMIN_CPF) {
                errorDiv.textContent = 'Este CPF já está cadastrado como administrador.';
                errorDiv.classList.remove('hidden');
                return;
            }
            
            if (users[cpf]) {
                errorDiv.textContent = 'Este CPF já está cadastrado.';
                errorDiv.classList.remove('hidden');
                return;
            }
            
            users[cpf] = { name: name, password: password, type: 'employee', setor: 'Não definido' };
            localStorage.setItem('ridUsers', JSON.stringify(users));
            
            errorDiv.classList.add('hidden');
            document.getElementById('registerPage').classList.add('hidden');
            document.getElementById('employeePanel').classList.remove('hidden');
        });
        
        document.getElementById('logoutAdminBtn').addEventListener('click', function() {
            document.getElementById('adminPanel').classList.add('hidden');
            document.getElementById('loginPage').classList.remove('hidden');
            document.getElementById('loginForm').reset();
        });
        
        // Function to update dashboard statistics
        function updateDashboardStats() {
            const rids = JSON.parse(localStorage.getItem('rids') || '[]');
            
            // Count RIDs by status
            const stats = {
                total: rids.length,
                corrigido: rids.filter(rid => rid.status === 'corrigido').length,
                emAndamento: rids.filter(rid => rid.status === 'em-andamento').length,
                vencido: rids.filter(rid => rid.status === 'vencido').length
            };
            
            // Update dashboard elements
            document.getElementById('totalRids').textContent = stats.total;
            document.getElementById('corrigidosRids').textContent = stats.corrigido;
            document.getElementById('emAndamentoRids').textContent = stats.emAndamento;
            document.getElementById('vencidosRids').textContent = stats.vencido;
            
            // Update Top 3 funcionários com mais RIDs
            updateTop3Employees();
            
            // Update Weekly RIDs
            updateWeeklyRids();
            
            // Update Tasks
            loadTasks();
        }
        
        // Tasks functionality
        function loadTasks() {
            const tasks = JSON.parse(localStorage.getItem('ridTasks') || '[]');
            const tasksList = document.getElementById('tasksList');
            const noTasksMessage = document.getElementById('noTasksMessage');
            
            if (tasks.length === 0) {
                tasksList.innerHTML = '';
                noTasksMessage.classList.remove('hidden');
                return;
            }
            
            noTasksMessage.classList.add('hidden');
            
            tasksList.innerHTML = tasks.map(task => `
                <div class="flex items-center justify-between p-3 rounded-lg" style="background-color: #d7d7d6;">
                    <div class="flex items-center gap-3 flex-1">
                        <button onclick="toggleTask(${task.id})" class="w-5 h-5 rounded border-2 flex items-center justify-center transition ${task.completed ? 'bg-green-500 border-green-500' : 'border-gray-400'}" style="${task.completed ? '' : 'border-color: #aba48f;'}" onmouseover="this.style.borderColor='#c0991e'" onmouseout="this.style.borderColor='${task.completed ? '#10b981' : '#aba48f'}'">
                            ${task.completed ? '<svg class="w-3 h-3 text-white" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg>' : ''}
                        </button>
                        <span class="text-sm ${task.completed ? 'line-through text-gray-500' : ''}" style="color: ${task.completed ? '#9ca3af' : '#8c8487'};">${task.text}</span>
                    </div>
                    <div class="flex items-center gap-2">
                        <span class="text-xs" style="color: #797877;">${formatTaskDate(task.createdAt)}</span>
                        <button onclick="deleteTask(${task.id})" class="w-6 h-6 rounded-lg flex items-center justify-center transition text-red-600" onmouseover="this.style.backgroundColor='#fee2e2'" onmouseout="this.style.backgroundColor='transparent'" title="Deletar tarefa">
                            <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                            </svg>
                        </button>
                    </div>
                </div>
            `).join('');
        }
        
        function formatTaskDate(dateString) {
            const date = new Date(dateString);
            const now = new Date();
            const diffTime = Math.abs(now - date);
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            
            if (diffDays === 1) {
                return 'Hoje';
            } else if (diffDays === 2) {
                return 'Ontem';
            } else if (diffDays <= 7) {
                return `${diffDays - 1} dias atrás`;
            } else {
                return date.toLocaleDateString('pt-BR', { day: '2-digit', month: '2-digit' });
            }
        }
        
        function addTask() {
            const taskInput = document.getElementById('taskInput');
            const taskText = taskInput.value.trim();
            
            if (!taskText) return;
            
            const tasks = JSON.parse(localStorage.getItem('ridTasks') || '[]');
            const newTask = {
                id: Date.now(),
                text: taskText,
                completed: false,
                createdAt: new Date().toISOString()
            };
            
            tasks.unshift(newTask); // Add to beginning of array
            localStorage.setItem('ridTasks', JSON.stringify(tasks));
            
            taskInput.value = '';
            document.getElementById('taskForm').classList.add('hidden');
            loadTasks();
        }
        
        function toggleTask(taskId) {
            const tasks = JSON.parse(localStorage.getItem('ridTasks') || '[]');
            const taskIndex = tasks.findIndex(task => task.id === taskId);
            
            if (taskIndex !== -1) {
                tasks[taskIndex].completed = !tasks[taskIndex].completed;
                localStorage.setItem('ridTasks', JSON.stringify(tasks));
                loadTasks();
            }
        }
        
        function deleteTask(taskId) {
            const tasks = JSON.parse(localStorage.getItem('ridTasks') || '[]');
            const filteredTasks = tasks.filter(task => task.id !== taskId);
            localStorage.setItem('ridTasks', JSON.stringify(filteredTasks));
            loadTasks();
        }
        
        // Task event listeners
        document.getElementById('addTaskBtn').addEventListener('click', function() {
            const taskForm = document.getElementById('taskForm');
            taskForm.classList.toggle('hidden');
            if (!taskForm.classList.contains('hidden')) {
                document.getElementById('taskInput').focus();
            }
        });
        
        document.getElementById('saveTaskBtn').addEventListener('click', addTask);
        
        document.getElementById('cancelTaskBtn').addEventListener('click', function() {
            document.getElementById('taskForm').classList.add('hidden');
            document.getElementById('taskInput').value = '';
        });
        
        document.getElementById('taskInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                addTask();
            }
        });
        
        // Report button event listeners
        document.getElementById('generateReportBtn').addEventListener('click', function() {
            generateRIDReport();
        });
        
        // Navigation to Reports
        document.querySelectorAll('#reportsNavBtn').forEach(btn => {
            btn.addEventListener('click', function() {
                // Hide all pages
                document.getElementById('adminPanel').classList.add('hidden');
                document.getElementById('employeePanel').classList.add('hidden');
                document.getElementById('ridListPage').classList.add('hidden');
                document.getElementById('employeeManagementPage').classList.add('hidden');
                document.getElementById('reportsPage').classList.remove('hidden');
                loadReportsPage();
            });
        });
        
        // Global variables for Top 3 filter
        let top3FilterMonth = 9; // October (0-based)
        let top3FilterYear = 2025;
        
        // Report generation functions
        function generateRIDReport() {
            const rids = JSON.parse(localStorage.getItem('rids') || '[]');
            
            if (rids.length === 0) {
                // Show message if no RIDs
                const messageModal = document.createElement('div');
                messageModal.className = 'fixed top-4 right-4 bg-orange-600 text-white px-6 py-3 rounded-lg shadow-lg z-50';
                messageModal.textContent = 'Nenhum RID encontrado para gerar relatório.';
                document.body.appendChild(messageModal);
                
                setTimeout(() => {
                    messageModal.remove();
                }, 3000);
                return;
            }
            
            // Create CSV content with all required columns
            const headers = [
                'Unidade',
                'RID Nº',
                'Data de Emissão',
                'Emitente',
                'Funcionário/Terceiro/Visitante',
                'Setor ou Empresa do Emitente',
                'Local do Incidente ou Desvio',
                'Gênese do Incidente ou Desvio',
                'Origem da Detecção',
                'Descrição',
                'Classificação do Risco',
                'Ação Imediata',
                'Ações Corretivas',
                'Responsável pelas Ações',
                'Prazo para Conclusão',
                'Data de Conclusão',
                'Status'
            ];
            
            const unidadeNames = {
                'calnamix': 'Calnamix',
                'calpi': 'Calpi',
                'caltins': 'Caltins',
                'formacal': 'Formacal',
                'gessotins': 'Gessotins',
                'imperio-caltins': 'Império Caltins',
                'minerax': 'Minerax',
                'minertins': 'Minertins',
                'natical': 'Natical',
                'nobretins': 'Nobretins',
                'supercal': 'Supercal'
            };
            
            const tipoContratoNames = {
                'funcionario': 'Funcionário',
                'terceiro-contratado': 'Terceiro Contratado',
                'terceiro-eventual': 'Terceiro Eventual',
                'visitante': 'Visitante'
            };
            
            const incidenteNames = {
                'condicao-risco': 'Condição de Risco',
                'desvio-comportamental': 'Desvio Comportamental',
                'dano-material': 'Dano Material',
                'quase-acidente': 'Quase Acidente'
            };
            
            const statusNames = {
                'vencido': 'Vencido',
                'corrigido': 'Corrigido',
                'em-andamento': 'Em Andamento',
                'pendente': 'Pendente'
            };
            
            // Sort RIDs by date (most recent first)
            const sortedRids = rids.sort((a, b) => new Date(b.dataOcorrencia) - new Date(a.dataOcorrencia));
            
            // Create CSV rows
            const csvRows = [headers.join(',')];
            
            sortedRids.forEach(rid => {
                const row = [
                    `"${unidadeNames[rid.unidade] || rid.unidade}"`,
                    `"${rid.ridNumber}"`,
                    `"${formatDateForReport(rid.dataOcorrencia)}"`,
                    `"${rid.emitente}"`,
                    `"${tipoContratoNames[rid.tipoContrato] || rid.tipoContrato}"`,
                    `"${rid.setorEmitente.toUpperCase()}"`,
                    `"${rid.localOcorrencia.replace(/"/g, '""')}"`,
                    `"${(rid.geneseIncidente || '').replace(/"/g, '""')}"`,
                    `"${(rid.origemDeteccao || '').replace(/"/g, '""')}"`,
                    `"${rid.descricaoOcorrencia.replace(/"/g, '""')}"`,
                    `"${rid.prioridade}"`,
                    `"${rid.acaoImediata.replace(/"/g, '""')}"`,
                    `"${(rid.acoesCorretivas || '').replace(/"/g, '""')}"`,
                    `"${(rid.responsavelAcoes || '').replace(/"/g, '""')}"`,
                    `"${(rid.prazoConclusao || '').replace(/"/g, '""')}"`,
                    `"${rid.status === 'corrigido' ? formatDateForReport(rid.dataOcorrencia) : 'Pendente'}"`,
                    `"${statusNames[rid.status] || rid.status}"`
                ];
                csvRows.push(row.join(','));
            });
            
            // Create and download CSV file
            const csvContent = csvRows.join('\n');
            const blob = new Blob(['\uFEFF' + csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            
            if (link.download !== undefined) {
                const url = URL.createObjectURL(blob);
                link.setAttribute('href', url);
                link.setAttribute('download', `Relatorio_RIDs_${new Date().toISOString().split('T')[0]}.csv`);
                link.style.visibility = 'hidden';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                
                // Show success message
                const successModal = document.createElement('div');
                successModal.className = 'fixed top-4 right-4 bg-green-600 text-white px-6 py-3 rounded-lg shadow-lg z-50';
                successModal.textContent = `Relatório gerado com sucesso! ${rids.length} RIDs exportados.`;
                document.body.appendChild(successModal);
                
                setTimeout(() => {
                    successModal.remove();
                }, 4000);
            }
        }
        
        function formatDateForReport(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('pt-BR');
        }
        
        const monthNames = [
            'Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho',
            'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'
        ];
        
        // Function to update Top 3 employees with most RIDs
        function updateTop3Employees() {
            const rids = JSON.parse(localStorage.getItem('rids') || '[]');
            const users = JSON.parse(localStorage.getItem('ridUsers') || '{}');
            
            // Use filter values instead of current date
            const filterMonth = top3FilterMonth;
            const filterYear = top3FilterYear;
            
            // Filter RIDs from selected month/year
            const filteredRids = rids.filter(rid => {
                const ridDate = new Date(rid.dataOcorrencia);
                return ridDate.getMonth() === filterMonth && ridDate.getFullYear() === filterYear;
            });
            
            // Count RIDs per employee for selected month/year
            const employeeRidCount = {};
            filteredRids.forEach(rid => {
                const emitente = rid.emitente;
                employeeRidCount[emitente] = (employeeRidCount[emitente] || 0) + 1;
            });
            
            // Convert to array and sort by RID count
            const sortedEmployees = Object.entries(employeeRidCount)
                .map(([name, count]) => {
                    // Try to find sector from users data
                    const userEntry = Object.values(users).find(user => user.name === name);
                    const setor = userEntry ? userEntry.setor : 'Não definido';
                    return { name, count, setor };
                })
                .sort((a, b) => b.count - a.count)
                .slice(0, 3); // Get top 3
            
            // Update the top 3 display
            const top3Container = document.querySelector('.bg-white.rounded-xl.shadow-md.p-6 .space-y-4');
            
            if (sortedEmployees.length === 0) {
                top3Container.innerHTML = `
                    <div class="text-center py-8">
                        <svg class="w-12 h-12 mx-auto mb-3" style="stroke: #aba48f;" fill="none" viewBox="0 0 24 24" stroke-width="1">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
                        </svg>
                        <p style="color: #797877;">Nenhum RID criado em ${monthNames[filterMonth]} de ${filterYear}</p>
                    </div>
                `;
                return;
            }
            
            // Generate HTML for top 3 employees
            const top3Html = sortedEmployees.map((employee, index) => {
                const position = index + 1;
                const badgeColors = {
                    1: '#c0991e',
                    2: '#aba48f',
                    3: '#797877'
                };
                
                return `
                    <div class="flex items-center justify-between p-3 rounded-lg" style="background-color: #d7d7d6;">
                        <div class="flex items-center gap-3">
                            <div class="w-8 h-8 rounded-full flex items-center justify-center text-white font-bold" style="background-color: ${badgeColors[position]};">${position}</div>
                            <div>
                                <p class="font-semibold" style="color: #8c8487;">${employee.name}</p>
                                <p class="text-sm" style="color: #797877;">Setor: ${employee.setor}</p>
                            </div>
                        </div>
                        <div class="text-right">
                            <p class="font-bold text-lg" style="color: #c0991e;">${employee.count}</p>
                            <p class="text-sm" style="color: #797877;">RIDs</p>
                        </div>
                    </div>
                `;
            }).join('');
            
            // Fill remaining positions if less than 3 employees
            const remainingPositions = [];
            for (let i = sortedEmployees.length; i < 3; i++) {
                const position = i + 1;
                const badgeColors = {
                    1: '#c0991e',
                    2: '#aba48f',
                    3: '#797877'
                };
                
                remainingPositions.push(`
                    <div class="flex items-center justify-between p-3 rounded-lg" style="background-color: #d7d7d6;">
                        <div class="flex items-center gap-3">
                            <div class="w-8 h-8 rounded-full flex items-center justify-center text-white font-bold" style="background-color: ${badgeColors[position]};">${position}</div>
                            <div>
                                <p class="font-semibold" style="color: #8c8487;">-</p>
                                <p class="text-sm" style="color: #797877;">Setor: -</p>
                            </div>
                        </div>
                        <div class="text-right">
                            <p class="font-bold text-lg" style="color: #c0991e;">0</p>
                            <p class="text-sm" style="color: #797877;">RIDs</p>
                        </div>
                    </div>
                `);
            }
            
            top3Container.innerHTML = top3Html + remainingPositions.join('');
        }
        
        // Function to update Weekly RIDs (Monday to Sunday)
        function updateWeeklyRids() {
            const rids = JSON.parse(localStorage.getItem('rids') || '[]');
            
            // Get current date (simulating today as October 27, 2025)
            const today = new Date('2025-10-27');
            
            // Find the Monday of current week
            const dayOfWeek = today.getDay(); // 0 = Sunday, 1 = Monday, etc.
            const daysFromMonday = dayOfWeek === 0 ? 6 : dayOfWeek - 1; // If Sunday, go back 6 days
            
            const weekStart = new Date(today);
            weekStart.setDate(today.getDate() - daysFromMonday);
            weekStart.setHours(0, 0, 0, 0);
            
            const weekEnd = new Date(weekStart);
            weekEnd.setDate(weekStart.getDate() + 6); // Sunday
            weekEnd.setHours(23, 59, 59, 999);
            
            // Filter RIDs from current week, but only up to today
            const weeklyRids = rids.filter(rid => {
                const ridDate = new Date(rid.dataOcorrencia);
                return ridDate >= weekStart && ridDate <= today;
            });
            
            // Sort by date (most recent first)
            weeklyRids.sort((a, b) => new Date(b.dataOcorrencia) - new Date(a.dataOcorrencia));
            
            // Update count
            const weeklyRidsCount = document.getElementById('weeklyRidsCount');
            if (weeklyRidsCount) {
                weeklyRidsCount.textContent = weeklyRids.length;
            }
            
            // Update week title dynamically
            const weekTitles = document.querySelectorAll('h3:contains("RIDs da Semana")');
            const startDateStr = weekStart.toLocaleDateString('pt-BR', { day: '2-digit', month: '2-digit' });
            const endDateStr = today.toLocaleDateString('pt-BR', { day: '2-digit', month: '2-digit' });
            const weekTitle = `RIDs da Semana (${startDateStr} - ${endDateStr}/2025)`;
            
            document.querySelectorAll('h3').forEach(h3 => {
                if (h3.textContent.includes('RIDs da Semana')) {
                    h3.textContent = weekTitle;
                }
            });
            
            // Update list
            const weeklyRidsList = document.getElementById('weeklyRidsList');
            const noWeeklyRidsMessage = document.getElementById('noWeeklyRidsMessage');
            
            if (!weeklyRidsList || !noWeeklyRidsMessage) return;
            
            if (weeklyRids.length === 0) {
                weeklyRidsList.innerHTML = '';
                noWeeklyRidsMessage.classList.remove('hidden');
                return;
            }
            
            noWeeklyRidsMessage.classList.add('hidden');
            
            weeklyRidsList.innerHTML = weeklyRids.map(rid => `
                <div class="flex items-center justify-between p-4 rounded-lg border-l-4 transition hover:shadow-md" style="background-color: #d7d7d6; border-left-color: ${getStatusColor(rid.status)};">
                    <div class="flex-1">
                        <div class="flex items-center gap-3 mb-2">
                            <h4 class="font-semibold" style="color: #c0991e;">${rid.ridNumber}</h4>
                            ${getStatusBadge(rid.status)}
                            ${getPriorityBadge(rid.prioridade)}
                        </div>
                        <p class="text-sm font-medium mb-1" style="color: #8c8487;">${rid.emitente}</p>
                        <p class="text-sm" style="color: #797877;">${rid.setorEmitente.toUpperCase()} • ${formatDate(rid.dataOcorrencia)}</p>
                        <p class="text-sm mt-2 line-clamp-2" style="color: #797877;">${rid.descricaoOcorrencia}</p>
                    </div>
                    <div class="ml-4">
                        <button onclick="showRidDetails(${rid.id})" class="px-3 py-2 rounded-lg text-white text-sm font-semibold transition" style="background-color: #c0991e;" onmouseover="this.style.backgroundColor='#a8821a'" onmouseout="this.style.backgroundColor='#c0991e'">
                            Ver Detalhes
                        </button>
                    </div>
                </div>
            `).join('');
        }
        
        // Helper function to get status color for border
        function getStatusColor(status) {
            const colors = {
                'vencido': '#dc2626',
                'corrigido': '#16a34a',
                'em-andamento': '#2563eb',
                'pendente': '#ca8a04'
            };
            return colors[status] || '#6b7280';
        }
        
        document.getElementById('logoutEmployeeBtn').addEventListener('click', function() {
            document.getElementById('employeePanel').classList.add('hidden');
            document.getElementById('loginPage').classList.remove('hidden');
            document.getElementById('loginForm').reset();
        });
        
        // Modal RID functionality
        document.getElementById('createRidBtn').addEventListener('click', function() {
            document.getElementById('ridModal').classList.remove('hidden');
            document.getElementById('dataOcorrencia').value = new Date().toISOString().split('T')[0];
        });
        
        document.getElementById('closeRidModal').addEventListener('click', function() {
            document.getElementById('ridModal').classList.add('hidden');
            document.getElementById('ridForm').reset();
            document.getElementById('ridError').classList.add('hidden');
            document.getElementById('ridSuccess').classList.add('hidden');
        });
        
        document.getElementById('cancelRidBtn').addEventListener('click', function() {
            document.getElementById('ridModal').classList.add('hidden');
            document.getElementById('ridForm').reset();
            document.getElementById('ridError').classList.add('hidden');
            document.getElementById('ridSuccess').classList.add('hidden');
        });
        
        // Close modal when clicking outside
        document.getElementById('ridModal').addEventListener('click', function(e) {
            if (e.target === this) {
                this.classList.add('hidden');
                document.getElementById('ridForm').reset();
                document.getElementById('ridError').classList.add('hidden');
                document.getElementById('ridSuccess').classList.add('hidden');
            }
        });
        
        document.getElementById('ridForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = {
                emitente: document.getElementById('emitente').value.trim(),
                tipoContrato: document.getElementById('tipoContrato').value,
                unidade: document.getElementById('unidade').value,
                setorEmitente: document.getElementById('setorEmitente').value,
                dataOcorrencia: document.getElementById('dataOcorrencia').value,
                incidenteDesvio: document.getElementById('incidenteDesvio').value,
                localOcorrencia: document.getElementById('localOcorrencia').value.trim(),
                descricaoOcorrencia: document.getElementById('descricaoOcorrencia').value.trim(),
                acaoImediata: document.getElementById('acaoImediata').value.trim(),
                prioridade: document.getElementById('prioridade').value,
                status: document.getElementById('status').value
            };
            
            const errorDiv = document.getElementById('ridError');
            const successDiv = document.getElementById('ridSuccess');
            
            // Validation
            if (!formData.emitente || !formData.tipoContrato || !formData.unidade || 
                !formData.setorEmitente || !formData.dataOcorrencia || !formData.incidenteDesvio || 
                !formData.localOcorrencia || !formData.descricaoOcorrencia || !formData.acaoImediata || 
                !formData.prioridade || !formData.status) {
                errorDiv.textContent = 'Por favor, preencha todos os campos obrigatórios.';
                errorDiv.classList.remove('hidden');
                successDiv.classList.add('hidden');
                return;
            }
            
            // Save RID (in real app, this would be sent to server)
            const rids = JSON.parse(localStorage.getItem('rids') || '[]');
            const newRid = {
                id: Date.now(),
                ridNumber: `RID-${String(rids.length + 1).padStart(5, '0')}`,
                ...formData,
                dataCriacao: new Date().toISOString(),
                criador: 'admin' // In real app, get from current user
            };
            rids.push(newRid);
            localStorage.setItem('rids', JSON.stringify(rids));
            
            // Show success message
            errorDiv.classList.add('hidden');
            successDiv.textContent = 'RID criado com sucesso!';
            successDiv.classList.remove('hidden');
            
            // Update dashboard stats
            updateDashboardStats();
            
            // Reset form after 2 seconds
            setTimeout(() => {
                document.getElementById('ridModal').classList.add('hidden');
                document.getElementById('ridForm').reset();
                successDiv.classList.add('hidden');
            }, 2000);
        });
        
        // Navigation to Dashboard - works from any page
        document.querySelectorAll('button').forEach(btn => {
            if (btn.textContent.trim() === 'Dashboard' || btn.id === 'backToDashboardBtn' || btn.id === 'backToDashboardFromEmployeesBtn' || btn.id === 'backToDashboardFromReportsBtn') {
                btn.addEventListener('click', function() {
                    // Hide all pages
                    document.getElementById('ridListPage').classList.add('hidden');
                    document.getElementById('employeePanel').classList.add('hidden');
                    document.getElementById('employeeManagementPage').classList.add('hidden');
                    document.getElementById('reportsPage').classList.add('hidden');
                    document.getElementById('adminPanel').classList.remove('hidden');
                    updateDashboardStats();
                });
            }
        });
        
        // Logout from RID List
        document.getElementById('logoutRidListBtn').addEventListener('click', function() {
            document.getElementById('ridListPage').classList.add('hidden');
            document.getElementById('loginPage').classList.remove('hidden');
            document.getElementById('loginForm').reset();
        });
        
        // Create RID from List Page
        document.getElementById('createRidFromListBtn').addEventListener('click', function() {
            document.getElementById('ridModal').classList.remove('hidden');
            document.getElementById('dataOcorrencia').value = new Date().toISOString().split('T')[0];
        });
        
        // Close RID Details Modal
        document.getElementById('closeRidDetailsModal').addEventListener('click', function() {
            document.getElementById('ridDetailsModal').classList.add('hidden');
        });
        
        // Close modal when clicking outside
        document.getElementById('ridDetailsModal').addEventListener('click', function(e) {
            if (e.target === this) {
                this.classList.add('hidden');
            }
        });
        
        // Search functionality
        document.getElementById('searchRid').addEventListener('input', function(e) {
            const searchTerm = e.target.value.toLowerCase();
            filterRidList(searchTerm);
        });
        
        function getPriorityFromIncident(incident) {
            const priorities = {
                'condicao-risco': 'Alta',
                'desvio-comportamental': 'Média',
                'dano-material': 'Alta',
                'quase-acidente': 'Crítica'
            };
            return priorities[incident] || 'Baixa';
        }
        
        function getStatusBadge(status) {
            const badges = {
                'vencido': '<span class="px-2 py-1 rounded-full text-xs font-semibold bg-red-100 text-red-800">Vencido</span>',
                'corrigido': '<span class="px-2 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-800">Corrigido</span>',
                'pendente': '<span class="px-2 py-1 rounded-full text-xs font-semibold bg-yellow-100 text-yellow-800">Pendente</span>',
                'em-andamento': '<span class="px-2 py-1 rounded-full text-xs font-semibold bg-blue-100 text-blue-800">Em Andamento</span>'
            };
            return badges[status] || '<span class="px-2 py-1 rounded-full text-xs font-semibold bg-gray-100 text-gray-800">Indefinido</span>';
        }
        
        function getPriorityBadge(priority) {
            const badges = {
                'Crítica': '<span class="px-2 py-1 rounded-full text-xs font-semibold bg-red-100 text-red-800">Crítica</span>',
                'Alta': '<span class="px-2 py-1 rounded-full text-xs font-semibold bg-orange-100 text-orange-800">Alta</span>',
                'Média': '<span class="px-2 py-1 rounded-full text-xs font-semibold bg-yellow-100 text-yellow-800">Média</span>',
                'Baixa': '<span class="px-2 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-800">Baixa</span>'
            };
            return badges[priority] || '<span class="px-2 py-1 rounded-full text-xs font-semibold bg-gray-100 text-gray-800">Indefinida</span>';
        }
        
        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('pt-BR');
        }
        
        function loadRidList() {
            const rids = JSON.parse(localStorage.getItem('rids') || '[]');
            const tbody = document.getElementById('ridTableBody');
            const noRidsMessage = document.getElementById('noRidsMessage');
            
            if (rids.length === 0) {
                tbody.innerHTML = '';
                noRidsMessage.classList.remove('hidden');
                return;
            }
            
            noRidsMessage.classList.add('hidden');
            
            tbody.innerHTML = rids.map(rid => `
                <tr class="border-b hover:bg-gray-50" style="border-color: #d7d7d6;">
                    <td class="px-6 py-4 font-semibold" style="color: #c0991e;">${rid.ridNumber}</td>
                    <td class="px-6 py-4" style="color: #8c8487;">${rid.emitente}</td>
                    <td class="px-6 py-4" style="color: #8c8487;">${rid.setorEmitente.toUpperCase()}</td>
                    <td class="px-6 py-4">${getPriorityBadge(rid.prioridade)}</td>
                    <td class="px-6 py-4">${getStatusBadge(rid.status)}</td>
                    <td class="px-6 py-4" style="color: #8c8487;">${formatDate(rid.dataOcorrencia)}</td>
                    <td class="px-6 py-4 text-center">
                        <button onclick="showRidDetails(${rid.id})" class="px-3 py-1 rounded-lg text-white text-sm font-semibold transition" style="background-color: #c0991e;" onmouseover="this.style.backgroundColor='#a8821a'" onmouseout="this.style.backgroundColor='#c0991e'">
                            Detalhes
                        </button>
                    </td>
                </tr>
            `).join('');
        }
        
        function filterRidList(searchTerm) {
            const rids = JSON.parse(localStorage.getItem('rids') || '[]');
            const filteredRids = rids.filter(rid => 
                rid.ridNumber.toLowerCase().includes(searchTerm) ||
                rid.emitente.toLowerCase().includes(searchTerm) ||
                rid.setorEmitente.toLowerCase().includes(searchTerm) ||
                rid.status.toLowerCase().includes(searchTerm)
            );
            
            const tbody = document.getElementById('ridTableBody');
            const noRidsMessage = document.getElementById('noRidsMessage');
            
            if (filteredRids.length === 0) {
                tbody.innerHTML = '';
                noRidsMessage.classList.remove('hidden');
                return;
            }
            
            noRidsMessage.classList.add('hidden');
            
            tbody.innerHTML = filteredRids.map(rid => `
                <tr class="border-b hover:bg-gray-50" style="border-color: #d7d7d6;">
                    <td class="px-6 py-4 font-semibold" style="color: #c0991e;">${rid.ridNumber}</td>
                    <td class="px-6 py-4" style="color: #8c8487;">${rid.emitente}</td>
                    <td class="px-6 py-4" style="color: #8c8487;">${rid.setorEmitente.toUpperCase()}</td>
                    <td class="px-6 py-4">${getPriorityBadge(rid.prioridade)}</td>
                    <td class="px-6 py-4">${getStatusBadge(rid.status)}</td>
                    <td class="px-6 py-4" style="color: #8c8487;">${formatDate(rid.dataOcorrencia)}</td>
                    <td class="px-6 py-4 text-center">
                        <button onclick="showRidDetails(${rid.id})" class="px-3 py-1 rounded-lg text-white text-sm font-semibold transition" style="background-color: #c0991e;" onmouseover="this.style.backgroundColor='#a8821a'" onmouseout="this.style.backgroundColor='#c0991e'">
                            Detalhes
                        </button>
                    </td>
                </tr>
            `).join('');
        }
        
        function updateRid(ridId) {
            const rids = JSON.parse(localStorage.getItem('rids') || '[]');
            const ridIndex = rids.findIndex(r => r.id === ridId);
            
            if (ridIndex === -1) return;
            
            const newPrioridade = document.getElementById('editPrioridade').value;
            const newStatus = document.getElementById('editStatus').value;
            
            rids[ridIndex].prioridade = newPrioridade;
            rids[ridIndex].status = newStatus;
            
            localStorage.setItem('rids', JSON.stringify(rids));
            
            // Close modal and refresh list
            document.getElementById('ridDetailsModal').classList.add('hidden');
            loadRidList();
            updateDashboardStats();
            
            // Show success message
            const successModal = document.createElement('div');
            successModal.className = 'fixed top-4 right-4 bg-green-600 text-white px-6 py-3 rounded-lg shadow-lg z-50';
            successModal.textContent = 'RID atualizado com sucesso!';
            document.body.appendChild(successModal);
            
            setTimeout(() => {
                successModal.remove();
            }, 3000);
        }
        
        function deleteRid(ridId) {
            // Create custom confirmation modal instead of browser confirm
            const confirmModal = document.createElement('div');
            confirmModal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50';
            confirmModal.innerHTML = `
                <div class="bg-white rounded-2xl shadow-xl max-w-md w-full p-6">
                    <div class="text-center">
                        <svg class="w-16 h-16 mx-auto mb-4 text-red-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z" />
                        </svg>
                        <h3 class="text-lg font-semibold mb-2" style="color: #8c8487;">Confirmar Exclusão</h3>
                        <p class="mb-6" style="color: #797877;">Tem certeza que deseja deletar este RID? Esta ação não pode ser desfeita.</p>
                        <div class="flex gap-4">
                            <button onclick="this.closest('.fixed').remove()" class="flex-1 px-4 py-2 border rounded-lg font-semibold transition" style="border-color: #aba48f; color: #8c8487;" onmouseover="this.style.backgroundColor='#d7d7d6'" onmouseout="this.style.backgroundColor='transparent'">
                                Cancelar
                            </button>
                            <button onclick="confirmDeleteRid(${ridId}); this.closest('.fixed').remove()" class="flex-1 px-4 py-2 bg-red-600 text-white rounded-lg font-semibold transition" onmouseover="this.style.backgroundColor='#dc2626'" onmouseout="this.style.backgroundColor='#dc2626'">
                                Deletar
                            </button>
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(confirmModal);
        }
        
        function confirmDeleteRid(ridId) {
            const rids = JSON.parse(localStorage.getItem('rids') || '[]');
            const filteredRids = rids.filter(r => r.id !== ridId);
            
            localStorage.setItem('rids', JSON.stringify(filteredRids));
            
            // Close modal and refresh list
            document.getElementById('ridDetailsModal').classList.add('hidden');
            loadRidList();
            updateDashboardStats();
            
            // Show success message
            const successModal = document.createElement('div');
            successModal.className = 'fixed top-4 right-4 bg-green-600 text-white px-6 py-3 rounded-lg shadow-lg z-50';
            successModal.textContent = 'RID deletado com sucesso!';
            document.body.appendChild(successModal);
            
            setTimeout(() => {
                successModal.remove();
            }, 3000);
        }
        
        // Employee Management Functions
        function loadEmployeeManagement() {
            const users = JSON.parse(localStorage.getItem('ridUsers') || '{}');
            
            // Separate admins and employees
            const admins = [];
            const employees = [];
            
            Object.entries(users).forEach(([cpf, user]) => {
                if (user.type === 'admin') {
                    admins.push({ cpf, ...user });
                } else if (user.type === 'employee') {
                    employees.push({ cpf, ...user });
                }
            });
            
            // Sort alphabetically by name
            admins.sort((a, b) => a.name.localeCompare(b.name));
            employees.sort((a, b) => a.name.localeCompare(b.name));
            
            // Load admins list
            const adminsList = document.getElementById('adminsList');
            const noAdminsMessage = document.getElementById('noAdminsMessage');
            
            if (admins.length === 0) {
                adminsList.innerHTML = '';
                noAdminsMessage.classList.remove('hidden');
            } else {
                noAdminsMessage.classList.add('hidden');
                adminsList.innerHTML = admins.map(admin => `
                    <div class="flex items-center justify-between p-4 rounded-lg" style="background-color: #d7d7d6;">
                        <div>
                            <h3 class="font-semibold" style="color: #8c8487;">${admin.name}</h3>
                            <p class="text-sm" style="color: #797877;">Setor: ${admin.setor || 'Não definido'}</p>
                        </div>
                        <div class="flex items-center gap-2">
                            <button onclick="deleteEmployee('${admin.cpf}')" class="w-8 h-8 rounded-lg flex items-center justify-center transition bg-red-600 text-white" onmouseover="this.style.backgroundColor='#dc2626'" onmouseout="this.style.backgroundColor='#dc2626'" title="Deletar funcionário">
                                <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                                </svg>
                            </button>
                            <div class="relative">
                                <button onclick="toggleEmployeeMenu('${admin.cpf}')" class="w-8 h-8 rounded-lg flex items-center justify-center transition" style="background-color: #c0991e;" onmouseover="this.style.backgroundColor='#a8821a'" onmouseout="this.style.backgroundColor='#c0991e'" title="Mais opções">
                                    <svg class="w-4 h-4 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z" />
                                    </svg>
                                </button>
                                <div id="menu-${admin.cpf}" class="hidden absolute right-0 top-10 bg-white rounded-lg shadow-lg border z-10" style="border-color: #d7d7d6;">
                                    <button onclick="editEmployeePassword('${admin.cpf}'); toggleEmployeeMenu('${admin.cpf}')" class="w-full px-4 py-2 text-left text-sm rounded-lg transition" style="color: #8c8487;" onmouseover="this.style.backgroundColor='#d7d7d6'" onmouseout="this.style.backgroundColor='transparent'">
                                        Editar Senha
                                    </button>
                                    <button onclick="demoteFromAdmin('${admin.cpf}'); toggleEmployeeMenu('${admin.cpf}')" class="w-full px-4 py-2 text-left text-sm rounded-lg transition" style="color: #8c8487;" onmouseover="this.style.backgroundColor='#d7d7d6'" onmouseout="this.style.backgroundColor='transparent'">
                                        Despromover de Administrador
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                `).join('');
            }
            
            // Load employees list
            const employeesList = document.getElementById('employeesList');
            const noEmployeesMessage = document.getElementById('noEmployeesMessage');
            
            if (employees.length === 0) {
                employeesList.innerHTML = '';
                noEmployeesMessage.classList.remove('hidden');
            } else {
                noEmployeesMessage.classList.add('hidden');
                employeesList.innerHTML = employees.map(employee => `
                    <div class="flex items-center justify-between p-4 rounded-lg" style="background-color: #d7d7d6;">
                        <div>
                            <h3 class="font-semibold" style="color: #8c8487;">${employee.name}</h3>
                            <p class="text-sm" style="color: #797877;">Setor: ${employee.setor || 'Não definido'}</p>
                        </div>
                        <div class="flex items-center gap-2">
                            <button onclick="deleteEmployee('${employee.cpf}')" class="w-8 h-8 rounded-lg flex items-center justify-center transition bg-red-600 text-white" onmouseover="this.style.backgroundColor='#dc2626'" onmouseout="this.style.backgroundColor='#dc2626'" title="Deletar funcionário">
                                <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                                </svg>
                            </button>
                            <div class="relative">
                                <button onclick="toggleEmployeeMenu('${employee.cpf}')" class="w-8 h-8 rounded-lg flex items-center justify-center transition" style="background-color: #c0991e;" onmouseover="this.style.backgroundColor='#a8821a'" onmouseout="this.style.backgroundColor='#c0991e'" title="Mais opções">
                                    <svg class="w-4 h-4 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z" />
                                    </svg>
                                </button>
                                <div id="menu-${employee.cpf}" class="hidden absolute right-0 top-10 bg-white rounded-lg shadow-lg border z-10" style="border-color: #d7d7d6;">
                                    <button onclick="editEmployeePassword('${employee.cpf}'); toggleEmployeeMenu('${employee.cpf}')" class="w-full px-4 py-2 text-left text-sm rounded-lg transition" style="color: #8c8487;" onmouseover="this.style.backgroundColor='#d7d7d6'" onmouseout="this.style.backgroundColor='transparent'">
                                        Editar Senha
                                    </button>
                                    <button onclick="confirmPromoteToAdmin('${employee.cpf}'); toggleEmployeeMenu('${employee.cpf}')" class="w-full px-4 py-2 text-left text-sm rounded-lg transition" style="color: #8c8487;" onmouseover="this.style.backgroundColor='#d7d7d6'" onmouseout="this.style.backgroundColor='transparent'">
                                        Promover a Administrador
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                `).join('');
            }
        }
        
        function toggleEmployeeMenu(cpf) {
            const menu = document.getElementById(`menu-${cpf}`);
            // Close all other menus
            document.querySelectorAll('[id^="menu-"]').forEach(m => {
                if (m.id !== `menu-${cpf}`) {
                    m.classList.add('hidden');
                }
            });
            menu.classList.toggle('hidden');
        }
        
        function confirmPromoteToAdmin(cpf) {
            const users = JSON.parse(localStorage.getItem('ridUsers') || '{}');
            const user = users[cpf];
            
            if (!user) return;
            
            // Create custom confirmation modal
            const confirmModal = document.createElement('div');
            confirmModal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50';
            confirmModal.innerHTML = `
                <div class="bg-white rounded-2xl shadow-xl max-w-md w-full p-6">
                    <div class="text-center">
                        <svg class="w-16 h-16 mx-auto mb-4 text-yellow-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
                        </svg>
                        <h3 class="text-lg font-semibold mb-2" style="color: #8c8487;">Confirmar Promoção</h3>
                        <p class="mb-6" style="color: #797877;">Tem certeza que deseja promover <strong>${user.name}</strong> a administrador? Esta pessoa terá acesso total ao sistema.</p>
                        <div class="flex gap-4">
                            <button onclick="this.closest('.fixed').remove()" class="flex-1 px-4 py-2 border rounded-lg font-semibold transition" style="border-color: #aba48f; color: #8c8487;" onmouseover="this.style.backgroundColor='#d7d7d6'" onmouseout="this.style.backgroundColor='transparent'">
                                Cancelar
                            </button>
                            <button onclick="promoteToAdmin('${cpf}'); this.closest('.fixed').remove()" class="flex-1 px-4 py-2 text-white rounded-lg font-semibold transition" style="background-color: #c0991e;" onmouseover="this.style.backgroundColor='#a8821a'" onmouseout="this.style.backgroundColor='#c0991e'">
                                Promover
                            </button>
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(confirmModal);
        }
        
        function promoteToAdmin(cpf) {
            const users = JSON.parse(localStorage.getItem('ridUsers') || '{}');
            if (users[cpf]) {
                users[cpf].type = 'admin';
                localStorage.setItem('ridUsers', JSON.stringify(users));
                loadEmployeeManagement();
                
                // Show success message
                const successModal = document.createElement('div');
                successModal.className = 'fixed top-4 right-4 bg-green-600 text-white px-6 py-3 rounded-lg shadow-lg z-50';
                successModal.textContent = 'Funcionário promovido a administrador com sucesso!';
                document.body.appendChild(successModal);
                
                setTimeout(() => {
                    successModal.remove();
                }, 3000);
            }
        }
        
        function demoteFromAdmin(cpf) {
            const users = JSON.parse(localStorage.getItem('ridUsers') || '{}');
            if (users[cpf]) {
                users[cpf].type = 'employee';
                localStorage.setItem('ridUsers', JSON.stringify(users));
                loadEmployeeManagement();
                
                // Show success message
                const successModal = document.createElement('div');
                successModal.className = 'fixed top-4 right-4 bg-orange-600 text-white px-6 py-3 rounded-lg shadow-lg z-50';
                successModal.textContent = 'Administrador despromovido para funcionário com sucesso!';
                document.body.appendChild(successModal);
                
                setTimeout(() => {
                    successModal.remove();
                }, 3000);
            }
        }
        
        function deleteEmployee(cpf) {
            // Create custom confirmation modal
            const confirmModal = document.createElement('div');
            confirmModal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50';
            confirmModal.innerHTML = `
                <div class="bg-white rounded-2xl shadow-xl max-w-md w-full p-6">
                    <div class="text-center">
                        <svg class="w-16 h-16 mx-auto mb-4 text-red-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z" />
                        </svg>
                        <h3 class="text-lg font-semibold mb-2" style="color: #8c8487;">Confirmar Exclusão</h3>
                        <p class="mb-6" style="color: #797877;">Tem certeza que deseja deletar este funcionário? Esta ação não pode ser desfeita.</p>
                        <div class="flex gap-4">
                            <button onclick="this.closest('.fixed').remove()" class="flex-1 px-4 py-2 border rounded-lg font-semibold transition" style="border-color: #aba48f; color: #8c8487;" onmouseover="this.style.backgroundColor='#d7d7d6'" onmouseout="this.style.backgroundColor='transparent'">
                                Cancelar
                            </button>
                            <button onclick="confirmDeleteEmployee('${cpf}'); this.closest('.fixed').remove()" class="flex-1 px-4 py-2 bg-red-600 text-white rounded-lg font-semibold transition" onmouseover="this.style.backgroundColor='#dc2626'" onmouseout="this.style.backgroundColor='#dc2626'">
                                Deletar
                            </button>
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(confirmModal);
        }
        
        function confirmDeleteEmployee(cpf) {
            const users = JSON.parse(localStorage.getItem('ridUsers') || '{}');
            delete users[cpf];
            localStorage.setItem('ridUsers', JSON.stringify(users));
            loadEmployeeManagement();
            
            // Show success message
            const successModal = document.createElement('div');
            successModal.className = 'fixed top-4 right-4 bg-green-600 text-white px-6 py-3 rounded-lg shadow-lg z-50';
            successModal.textContent = 'Funcionário deletado com sucesso!';
            document.body.appendChild(successModal);
            
            setTimeout(() => {
                successModal.remove();
            }, 3000);
        }
        
        function editEmployeePassword(cpf) {
            const users = JSON.parse(localStorage.getItem('ridUsers') || '{}');
            const user = users[cpf];
            
            if (!user) return;
            
            // Create password edit modal
            const passwordModal = document.createElement('div');
            passwordModal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50';
            passwordModal.innerHTML = `
                <div class="bg-white rounded-2xl shadow-xl max-w-md w-full p-6">
                    <div class="text-center mb-6">
                        <svg class="w-16 h-16 mx-auto mb-4" style="stroke: #c0991e;" fill="none" viewBox="0 0 24 24" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z" />
                        </svg>
                        <h3 class="text-lg font-semibold mb-2" style="color: #8c8487;">Editar Senha</h3>
                        <p class="mb-4" style="color: #797877;">Alterar senha de <strong>${user.name}</strong></p>
                    </div>
                    
                    <form id="passwordEditForm" class="space-y-4">
                        <div>
                            <label for="newPassword" class="block text-sm font-medium mb-2" style="color: #8c8487;">Nova Senha</label>
                            <input type="password" id="newPassword" placeholder="Digite a nova senha" required
                                   class="w-full px-4 py-3 border rounded-lg outline-none transition" style="border-color: #aba48f; background-color: #d7d7d6;" onfocus="this.style.borderColor='#c0991e'; this.style.boxShadow='0 0 0 2px rgba(192, 153, 30, 0.2)'" onblur="this.style.borderColor='#aba48f'; this.style.boxShadow='none'">
                        </div>
                        
                        <div>
                            <label for="confirmNewPassword" class="block text-sm font-medium mb-2" style="color: #8c8487;">Confirmar Nova Senha</label>
                            <input type="password" id="confirmNewPassword" placeholder="Confirme a nova senha" required
                                   class="w-full px-4 py-3 border rounded-lg outline-none transition" style="border-color: #aba48f; background-color: #d7d7d6;" onfocus="this.style.borderColor='#c0991e'; this.style.boxShadow='0 0 0 2px rgba(192, 153, 30, 0.2)'" onblur="this.style.borderColor='#aba48f'; this.style.boxShadow='none'">
                        </div>
                        
                        <div id="passwordError" class="hidden bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm"></div>
                        
                        <div class="flex gap-4 pt-4">
                            <button type="button" onclick="this.closest('.fixed').remove()" class="flex-1 px-4 py-2 border rounded-lg font-semibold transition" style="border-color: #aba48f; color: #8c8487;" onmouseover="this.style.backgroundColor='#d7d7d6'" onmouseout="this.style.backgroundColor='transparent'">
                                Cancelar
                            </button>
                            <button type="submit" class="flex-1 px-4 py-2 text-white rounded-lg font-semibold transition" style="background-color: #c0991e;" onmouseover="this.style.backgroundColor='#a8821a'" onmouseout="this.style.backgroundColor='#c0991e'">
                                Salvar Senha
                            </button>
                        </div>
                    </form>
                </div>
            `;
            
            document.body.appendChild(passwordModal);
            
            // Handle form submission
            const form = passwordModal.querySelector('#passwordEditForm');
            form.addEventListener('submit', function(e) {
                e.preventDefault();
                
                const newPassword = document.getElementById('newPassword').value;
                const confirmPassword = document.getElementById('confirmNewPassword').value;
                const errorDiv = document.getElementById('passwordError');
                
                if (!newPassword || !confirmPassword) {
                    errorDiv.textContent = 'Por favor, preencha todos os campos.';
                    errorDiv.classList.remove('hidden');
                    return;
                }
                
                if (newPassword !== confirmPassword) {
                    errorDiv.textContent = 'As senhas não coincidem.';
                    errorDiv.classList.remove('hidden');
                    return;
                }
                
                if (newPassword.length < 4) {
                    errorDiv.textContent = 'A senha deve ter pelo menos 4 caracteres.';
                    errorDiv.classList.remove('hidden');
                    return;
                }
                
                // Update password
                users[cpf].password = newPassword;
                localStorage.setItem('ridUsers', JSON.stringify(users));
                
                // Close modal
                passwordModal.remove();
                
                // Show success message
                const successModal = document.createElement('div');
                successModal.className = 'fixed top-4 right-4 bg-green-600 text-white px-6 py-3 rounded-lg shadow-lg z-50';
                successModal.textContent = 'Senha alterada com sucesso!';
                document.body.appendChild(successModal);
                
                setTimeout(() => {
                    successModal.remove();
                }, 3000);
            });
        }
        
        // Navigation to Employee Management
        document.querySelectorAll('#employeeManagementNavBtn, #employeeManagementNavFromReportsBtn').forEach(btn => {
            btn.addEventListener('click', function() {
                // Hide all pages
                document.getElementById('adminPanel').classList.add('hidden');
                document.getElementById('employeePanel').classList.add('hidden');
                document.getElementById('ridListPage').classList.add('hidden');
                document.getElementById('reportsPage').classList.add('hidden');
                document.getElementById('employeeManagementPage').classList.remove('hidden');
                loadEmployeeManagement();
            });
        });
        
        // Navigation to RID List - works from any page
        document.querySelectorAll('#ridListNavBtn, #ridListNavFromEmployeesBtn, #ridListNavFromReportsBtn').forEach(btn => {
            btn.addEventListener('click', function() {
                // Hide all pages
                document.getElementById('adminPanel').classList.add('hidden');
                document.getElementById('employeePanel').classList.add('hidden');
                document.getElementById('employeeManagementPage').classList.add('hidden');
                document.getElementById('reportsPage').classList.add('hidden');
                document.getElementById('ridListPage').classList.remove('hidden');
                loadRidList();
            });
        });
        

        
        // Logout from Employee Management
        document.getElementById('logoutEmployeeManagementBtn').addEventListener('click', function() {
            document.getElementById('employeeManagementPage').classList.add('hidden');
            document.getElementById('loginPage').classList.remove('hidden');
            document.getElementById('loginForm').reset();
        });
        
        // Close employee menus when clicking outside
        document.addEventListener('click', function(e) {
            if (!e.target.closest('[id^="menu-"]') && !e.target.closest('button[onclick*="toggleEmployeeMenu"]')) {
                document.querySelectorAll('[id^="menu-"]').forEach(menu => {
                    menu.classList.add('hidden');
                });
            }
        });
        
        // Quick User Management Modal Functions
        document.getElementById('quickManageUsersBtn').addEventListener('click', function() {
            document.getElementById('quickUserManagementModal').classList.remove('hidden');
            loadQuickEmployeesList();
        });
        
        document.getElementById('closeQuickUserModal').addEventListener('click', function() {
            document.getElementById('quickUserManagementModal').classList.add('hidden');
            document.getElementById('searchEmployee').value = '';
        });
        
        // Close modal when clicking outside
        document.getElementById('quickUserManagementModal').addEventListener('click', function(e) {
            if (e.target === this) {
                this.classList.add('hidden');
                document.getElementById('searchEmployee').value = '';
            }
        });
        
        // Search functionality for quick modal
        document.getElementById('searchEmployee').addEventListener('input', function(e) {
            const searchTerm = e.target.value.toLowerCase();
            filterQuickEmployeesList(searchTerm);
        });
        
        function loadQuickEmployeesList() {
            const users = JSON.parse(localStorage.getItem('ridUsers') || '{}');
            
            // Get all users (employees and admins)
            const allUsers = [];
            Object.entries(users).forEach(([cpf, user]) => {
                allUsers.push({ cpf, ...user });
            });
            
            // Sort alphabetically by name
            allUsers.sort((a, b) => a.name.localeCompare(b.name));
            
            displayQuickEmployeesList(allUsers);
        }
        
        function displayQuickEmployeesList(employees) {
            const employeesList = document.getElementById('quickEmployeesList');
            const noEmployeesMessage = document.getElementById('noEmployeesFoundMessage');
            
            if (employees.length === 0) {
                employeesList.innerHTML = '';
                noEmployeesMessage.classList.remove('hidden');
                return;
            }
            
            noEmployeesMessage.classList.add('hidden');
            
            employeesList.innerHTML = employees.map(employee => {
                const typeLabel = employee.type === 'admin' ? 'Administrador' : 'Funcionário';
                const typeColor = employee.type === 'admin' ? '#c0991e' : '#8c8487';
                
                return `
                    <div class="flex items-center justify-between p-4 rounded-lg" style="background-color: #d7d7d6;">
                        <div class="flex-1">
                            <div class="flex items-center gap-3">
                                <div>
                                    <h3 class="font-semibold" style="color: #8c8487;">${employee.name}</h3>
                                    <div class="flex items-center gap-2 mt-1">
                                        <span class="text-sm" style="color: #797877;">Setor: ${employee.setor || 'Não definido'}</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="flex items-center gap-2">
                            <button onclick="quickEditPassword('${employee.cpf}')" class="px-4 py-2 rounded-lg text-white font-semibold transition text-sm" style="background-color: #c0991e;" onmouseover="this.style.backgroundColor='#a8821a'" onmouseout="this.style.backgroundColor='#c0991e'" title="Alterar senha">
                                Alterar Senha
                            </button>
                        </div>
                    </div>
                `;
            }).join('');
        }
        
        function filterQuickEmployeesList(searchTerm) {
            const users = JSON.parse(localStorage.getItem('ridUsers') || '{}');
            
            // Get all users and filter by search term
            const filteredUsers = [];
            Object.entries(users).forEach(([cpf, user]) => {
                if (user.name.toLowerCase().includes(searchTerm)) {
                    filteredUsers.push({ cpf, ...user });
                }
            });
            
            // Sort alphabetically by name
            filteredUsers.sort((a, b) => a.name.localeCompare(b.name));
            
            displayQuickEmployeesList(filteredUsers);
        }
        
        function quickEditPassword(cpf) {
            const users = JSON.parse(localStorage.getItem('ridUsers') || '{}');
            const user = users[cpf];
            
            if (!user) return;
            
            // Create password edit modal
            const passwordModal = document.createElement('div');
            passwordModal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50';
            passwordModal.innerHTML = `
                <div class="bg-white rounded-2xl shadow-xl max-w-md w-full p-6">
                    <div class="text-center mb-6">
                        <svg class="w-16 h-16 mx-auto mb-4" style="stroke: #c0991e;" fill="none" viewBox="0 0 24 24" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z" />
                        </svg>
                        <h3 class="text-lg font-semibold mb-2" style="color: #8c8487;">Alterar Senha</h3>
                        <p class="mb-4" style="color: #797877;">Definir nova senha para <strong>${user.name}</strong></p>
                    </div>
                    
                    <form id="quickPasswordEditForm" class="space-y-4">
                        <div>
                            <label for="quickNewPassword" class="block text-sm font-medium mb-2" style="color: #8c8487;">Nova Senha</label>
                            <input type="password" id="quickNewPassword" placeholder="Digite a nova senha" required
                                   class="w-full px-4 py-3 border rounded-lg outline-none transition" style="border-color: #aba48f; background-color: #d7d7d6;" onfocus="this.style.borderColor='#c0991e'; this.style.boxShadow='0 0 0 2px rgba(192, 153, 30, 0.2)'" onblur="this.style.borderColor='#aba48f'; this.style.boxShadow='none'">
                        </div>
                        
                        <div>
                            <label for="quickConfirmNewPassword" class="block text-sm font-medium mb-2" style="color: #8c8487;">Confirmar Nova Senha</label>
                            <input type="password" id="quickConfirmNewPassword" placeholder="Confirme a nova senha" required
                                   class="w-full px-4 py-3 border rounded-lg outline-none transition" style="border-color: #aba48f; background-color: #d7d7d6;" onfocus="this.style.borderColor='#c0991e'; this.style.boxShadow='0 0 0 2px rgba(192, 153, 30, 0.2)'" onblur="this.style.borderColor='#aba48f'; this.style.boxShadow='none'">
                        </div>
                        
                        <div id="quickPasswordError" class="hidden bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm"></div>
                        
                        <div class="flex gap-4 pt-4">
                            <button type="button" onclick="this.closest('.fixed').remove()" class="flex-1 px-4 py-2 border rounded-lg font-semibold transition" style="border-color: #aba48f; color: #8c8487;" onmouseover="this.style.backgroundColor='#d7d7d6'" onmouseout="this.style.backgroundColor='transparent'">
                                Cancelar
                            </button>
                            <button type="submit" class="flex-1 px-4 py-2 text-white rounded-lg font-semibold transition" style="background-color: #c0991e;" onmouseover="this.style.backgroundColor='#a8821a'" onmouseout="this.style.backgroundColor='#c0991e'">
                                Salvar Senha
                            </button>
                        </div>
                    </form>
                </div>
            `;
            
            document.body.appendChild(passwordModal);
            
            // Handle form submission
            const form = passwordModal.querySelector('#quickPasswordEditForm');
            form.addEventListener('submit', function(e) {
                e.preventDefault();
                
                const newPassword = document.getElementById('quickNewPassword').value;
                const confirmPassword = document.getElementById('quickConfirmNewPassword').value;
                const errorDiv = document.getElementById('quickPasswordError');
                
                if (!newPassword || !confirmPassword) {
                    errorDiv.textContent = 'Por favor, preencha todos os campos.';
                    errorDiv.classList.remove('hidden');
                    return;
                }
                
                if (newPassword !== confirmPassword) {
                    errorDiv.textContent = 'As senhas não coincidem.';
                    errorDiv.classList.remove('hidden');
                    return;
                }
                
                if (newPassword.length < 4) {
                    errorDiv.textContent = 'A senha deve ter pelo menos 4 caracteres.';
                    errorDiv.classList.remove('hidden');
                    return;
                }
                
                // Update password
                const users = JSON.parse(localStorage.getItem('ridUsers') || '{}');
                users[cpf].password = newPassword;
                localStorage.setItem('ridUsers', JSON.stringify(users));
                
                // Close modal
                passwordModal.remove();
                
                // Show success message
                const successModal = document.createElement('div');
                successModal.className = 'fixed top-4 right-4 bg-green-600 text-white px-6 py-3 rounded-lg shadow-lg z-50';
                successModal.textContent = `Senha de ${user.name} alterada com sucesso!`;
                document.body.appendChild(successModal);
                
                setTimeout(() => {
                    successModal.remove();
                }, 3000);
            });
        }
        
        // Reports Page Functions
        function loadReportsPage() {
            const rids = JSON.parse(localStorage.getItem('rids') || '[]');
            const tbody = document.getElementById('reportsTableBody');
            const noReportsMessage = document.getElementById('noReportsMessage');
            const reportSummary = document.getElementById('reportSummary');
            const reportDate = document.getElementById('reportDate');
            
            // Update report date
            reportDate.textContent = new Date().toLocaleString('pt-BR');
            
            if (rids.length === 0) {
                tbody.innerHTML = '';
                noReportsMessage.classList.remove('hidden');
                reportSummary.textContent = 'Total de registros: 0';
                return;
            }
            
            noReportsMessage.classList.add('hidden');
            reportSummary.textContent = `Total de registros: ${rids.length}`;
            
            // Sort RIDs by date (most recent first)
            const sortedRids = rids.sort((a, b) => new Date(b.dataOcorrencia) - new Date(a.dataOcorrencia));
            
            const unidadeNames = {
                'calnamix': 'Calnamix',
                'calpi': 'Calpi',
                'caltins': 'Caltins',
                'formacal': 'Formacal',
                'gessotins': 'Gessotins',
                'imperio-caltins': 'Império Caltins',
                'minerax': 'Minerax',
                'minertins': 'Minertins',
                'natical': 'Natical',
                'nobretins': 'Nobretins',
                'supercal': 'Supercal'
            };
            
            const tipoContratoNames = {
                'funcionario': 'Funcionário',
                'terceiro-contratado': 'Terceiro Contratado',
                'terceiro-eventual': 'Terceiro Eventual',
                'visitante': 'Visitante'
            };
            
            const incidenteNames = {
                'condicao-risco': 'Condição de Risco',
                'desvio-comportamental': 'Desvio Comportamental',
                'dano-material': 'Dano Material',
                'quase-acidente': 'Quase Acidente'
            };
            
            const statusNames = {
                'vencido': 'Vencido',
                'corrigido': 'Corrigido',
                'em-andamento': 'Em Andamento',
                'pendente': 'Pendente'
            };
            
            tbody.innerHTML = sortedRids.map(rid => `
                <tr class="border-b hover:bg-gray-50" style="border-color: #d7d7d6;" data-rid-id="${rid.id}">
                    <td class="px-4 py-3 editable" data-field="unidade" style="color: #8c8487; cursor: pointer;" title="Clique para editar">${unidadeNames[rid.unidade] || rid.unidade}</td>
                    <td class="px-4 py-3 font-semibold editable" data-field="ridNumber" style="color: #c0991e; cursor: pointer;" title="Clique para editar">${rid.ridNumber}</td>
                    <td class="px-4 py-3 editable" data-field="dataOcorrencia" style="color: #8c8487; cursor: pointer;" title="Clique para editar">${formatDate(rid.dataOcorrencia)}</td>
                    <td class="px-4 py-3 editable" data-field="emitente" style="color: #8c8487; cursor: pointer;" title="Clique para editar">${rid.emitente}</td>
                    <td class="px-4 py-3 editable" data-field="tipoContrato" style="color: #8c8487; cursor: pointer;" title="Clique para editar">${tipoContratoNames[rid.tipoContrato] || rid.tipoContrato}</td>
                    <td class="px-4 py-3 editable" data-field="setorEmitente" style="color: #8c8487; cursor: pointer;" title="Clique para editar">${rid.setorEmitente.toUpperCase()}</td>
                    <td class="px-4 py-3 editable" data-field="localOcorrencia" style="color: #8c8487; max-width: 250px; cursor: pointer;" title="Clique para editar">${rid.localOcorrencia}</td>
                    <td class="px-4 py-3 editable" data-field="geneseIncidente" style="color: #8c8487; cursor: pointer;" title="Clique para editar">${rid.geneseIncidente || ''}</td>
                    <td class="px-4 py-3 editable" data-field="origemDeteccao" style="color: #8c8487; cursor: pointer;" title="Clique para editar">${rid.origemDeteccao || ''}</td>
                    <td class="px-4 py-3 editable" data-field="descricaoOcorrencia" style="color: #8c8487; max-width: 300px; cursor: pointer;" title="Clique para editar">${rid.descricaoOcorrencia}</td>
                    <td class="px-4 py-3 editable" data-field="prioridade" style="color: #8c8487; cursor: pointer;" title="Clique para editar">${rid.prioridade}</td>
                    <td class="px-4 py-3 editable" data-field="acaoImediata" style="color: #8c8487; max-width: 250px; cursor: pointer;" title="Clique para editar">${rid.acaoImediata}</td>
                    <td class="px-4 py-3 editable" data-field="acoesCorretivas" style="color: #8c8487; cursor: pointer;" title="Clique para editar">${rid.acoesCorretivas || ''}</td>
                    <td class="px-4 py-3 editable" data-field="responsavelAcoes" style="color: #8c8487; cursor: pointer;" title="Clique para editar">${rid.responsavelAcoes || ''}</td>
                    <td class="px-4 py-3 editable" data-field="prazoConclusao" style="color: #8c8487; cursor: pointer;" title="Clique para editar">${rid.prazoConclusao || ''}</td>
                    <td class="px-4 py-3 editable" data-field="dataConclusao" style="color: #8c8487; cursor: pointer;" title="Clique para editar">${rid.status === 'corrigido' ? formatDate(rid.dataOcorrencia) : 'Pendente'}</td>
                    <td class="px-4 py-3 editable" data-field="status" style="cursor: pointer;" title="Clique para editar">${getStatusBadge(rid.status)}</td>
                    <td class="px-4 py-3 text-center">
                        <button onclick="showRidDetails(${rid.id})" class="px-3 py-1 rounded-lg text-white text-sm font-semibold transition" style="background-color: #c0991e;" onmouseover="this.style.backgroundColor='#a8821a'" onmouseout="this.style.backgroundColor='#c0991e'">
                            Editar
                        </button>
                    </td>
                </tr>
            `).join('');
            
            // Add click listeners for editable cells
            addEditableCellListeners();
        }
        
        // Function to add editable cell functionality
        function addEditableCellListeners() {
            document.querySelectorAll('.editable').forEach(cell => {
                // Make cell directly editable for text fields
                const field = cell.dataset.field;
                
                if (field === 'status' || field === 'prioridade' || field === 'unidade' || 
                    field === 'tipoContrato' || field === 'setorEmitente' || 
                    field === 'dataOcorrencia' || field === 'dataConclusao') {
                    // Keep dropdown/date functionality for these fields
                    cell.addEventListener('click', function() {
                        if (this.querySelector('input') || this.querySelector('select')) return;
                        
                        const ridId = this.closest('tr').dataset.ridId;
                        const rids = JSON.parse(localStorage.getItem('rids') || '[]');
                        const rid = rids.find(r => r.id == ridId);
                        
                        if (!rid) return;
                        
                        let currentValue = '';
                        let inputElement;
                        
                        if (field === 'status') {
                            currentValue = rid.status;
                            inputElement = document.createElement('select');
                            inputElement.className = 'w-full px-2 py-1 text-sm bg-transparent border-0 outline-0';
                            inputElement.style.color = 'inherit';
                            inputElement.innerHTML = `
                                <option value="vencido" ${currentValue === 'vencido' ? 'selected' : ''}>Vencido</option>
                                <option value="corrigido" ${currentValue === 'corrigido' ? 'selected' : ''}>Corrigido</option>
                                <option value="em-andamento" ${currentValue === 'em-andamento' ? 'selected' : ''}>Em Andamento</option>
                                <option value="pendente" ${currentValue === 'pendente' ? 'selected' : ''}>Pendente</option>
                            `;
                        } else if (field === 'prioridade') {
                            currentValue = rid.prioridade;
                            inputElement = document.createElement('select');
                            inputElement.className = 'w-full px-2 py-1 text-sm bg-transparent border-0 outline-0';
                            inputElement.style.color = 'inherit';
                            inputElement.innerHTML = `
                                <option value="Crítica" ${currentValue === 'Crítica' ? 'selected' : ''}>Crítica</option>
                                <option value="Alta" ${currentValue === 'Alta' ? 'selected' : ''}>Alta</option>
                                <option value="Média" ${currentValue === 'Média' ? 'selected' : ''}>Média</option>
                                <option value="Baixa" ${currentValue === 'Baixa' ? 'selected' : ''}>Baixa</option>
                            `;
                        } else if (field === 'unidade') {
                            currentValue = rid.unidade;
                            inputElement = document.createElement('select');
                            inputElement.className = 'w-full px-2 py-1 text-sm bg-transparent border-0 outline-0';
                            inputElement.style.color = 'inherit';
                            inputElement.innerHTML = `
                                <option value="calnamix" ${currentValue === 'calnamix' ? 'selected' : ''}>Calnamix</option>
                                <option value="calpi" ${currentValue === 'calpi' ? 'selected' : ''}>Calpi</option>
                                <option value="caltins" ${currentValue === 'caltins' ? 'selected' : ''}>Caltins</option>
                                <option value="formacal" ${currentValue === 'formacal' ? 'selected' : ''}>Formacal</option>
                                <option value="gessotins" ${currentValue === 'gessotins' ? 'selected' : ''}>Gessotins</option>
                                <option value="imperio-caltins" ${currentValue === 'imperio-caltins' ? 'selected' : ''}>Império Caltins</option>
                                <option value="minerax" ${currentValue === 'minerax' ? 'selected' : ''}>Minerax</option>
                                <option value="minertins" ${currentValue === 'minertins' ? 'selected' : ''}>Minertins</option>
                                <option value="natical" ${currentValue === 'natical' ? 'selected' : ''}>Natical</option>
                                <option value="nobretins" ${currentValue === 'nobretins' ? 'selected' : ''}>Nobretins</option>
                                <option value="supercal" ${currentValue === 'supercal' ? 'selected' : ''}>Supercal</option>
                            `;
                        } else if (field === 'tipoContrato') {
                            currentValue = rid.tipoContrato;
                            inputElement = document.createElement('select');
                            inputElement.className = 'w-full px-2 py-1 text-sm bg-transparent border-0 outline-0';
                            inputElement.style.color = 'inherit';
                            inputElement.innerHTML = `
                                <option value="funcionario" ${currentValue === 'funcionario' ? 'selected' : ''}>Funcionário</option>
                                <option value="terceiro-contratado" ${currentValue === 'terceiro-contratado' ? 'selected' : ''}>Terceiro</option>
                                <option value="visitante" ${currentValue === 'visitante' ? 'selected' : ''}>Visitante</option>
                            `;
                        } else if (field === 'setorEmitente') {
                            currentValue = rid.setorEmitente;
                            inputElement = document.createElement('select');
                            inputElement.className = 'w-full px-2 py-1 text-sm bg-transparent border-0 outline-0';
                            inputElement.style.color = 'inherit';
                            inputElement.innerHTML = `
                                <option value="adm" ${currentValue === 'adm' ? 'selected' : ''}>ADM</option>
                                <option value="m-movel" ${currentValue === 'm-movel' ? 'selected' : ''}>M. Móvel</option>
                                <option value="m-fixa" ${currentValue === 'm-fixa' ? 'selected' : ''}>M. Fixa</option>
                                <option value="m-eletrica" ${currentValue === 'm-eletrica' ? 'selected' : ''}>M. Elétrica</option>
                                <option value="producao" ${currentValue === 'producao' ? 'selected' : ''}>Produção</option>
                                <option value="mina" ${currentValue === 'mina' ? 'selected' : ''}>Mina</option>
                            `;
                        } else if (field === 'dataOcorrencia' || field === 'dataConclusao') {
                            if (field === 'dataOcorrencia') {
                                currentValue = rid.dataOcorrencia;
                            } else {
                                currentValue = rid.dataConclusao || '';
                            }
                            inputElement = document.createElement('input');
                            inputElement.type = 'date';
                            inputElement.className = 'w-full px-2 py-1 text-sm bg-transparent border-0 outline-0';
                            inputElement.style.color = 'inherit';
                            inputElement.value = currentValue;
                        }
                        
                        // Replace cell content with input
                        this.innerHTML = '';
                        this.appendChild(inputElement);
                        inputElement.focus();
                        
                        // Save on change or blur
                        const saveEdit = () => {
                            const newValue = inputElement.value.trim();
                            
                            // Update RID data
                            updateRidField(ridId, field, newValue);
                            
                            // Update display based on field type
                            if (field === 'status') {
                                this.innerHTML = getStatusBadge(newValue);
                            } else if (field === 'dataOcorrencia' || field === 'dataConclusao') {
                                this.textContent = newValue ? formatDate(newValue) : 'Pendente';
                                this.style.color = '#8c8487';
                            } else if (field === 'unidade') {
                                const unidadeNames = {
                                    'calnamix': 'Calnamix', 'calpi': 'Calpi', 'caltins': 'Caltins',
                                    'formacal': 'Formacal', 'gessotins': 'Gessotins', 'imperio-caltins': 'Império Caltins',
                                    'minerax': 'Minerax', 'minertins': 'Minertins', 'natical': 'Natical',
                                    'nobretins': 'Nobretins', 'supercal': 'Supercal'
                                };
                                this.textContent = unidadeNames[newValue] || newValue;
                                this.style.color = '#8c8487';
                            } else if (field === 'tipoContrato') {
                                const tipoContratoNames = {
                                    'funcionario': 'Funcionário', 'terceiro-contratado': 'Terceiro',
                                    'visitante': 'Visitante'
                                };
                                this.textContent = tipoContratoNames[newValue] || newValue;
                                this.style.color = '#8c8487';
                            } else if (field === 'setorEmitente') {
                                this.textContent = newValue.toUpperCase();
                                this.style.color = '#8c8487';
                            } else {
                                this.textContent = newValue;
                                this.style.color = field === 'ridNumber' ? '#c0991e' : '#8c8487';
                            }
                            
                            // Show success message
                            showEditSuccessMessage();
                        };
                        
                        inputElement.addEventListener('blur', saveEdit);
                        inputElement.addEventListener('change', saveEdit);
                    });
                } else {
                    // Make text fields directly editable
                    cell.contentEditable = true;
                    cell.style.outline = 'none';
                    
                    // Store original value when starting to edit
                    let originalValue = '';
                    
                    cell.addEventListener('focus', function() {
                        originalValue = this.textContent;
                        this.style.backgroundColor = '#f0f9ff';
                        this.style.border = '1px solid #c0991e';
                    });
                    
                    cell.addEventListener('blur', function() {
                        const newValue = this.textContent.trim();
                        const ridId = this.closest('tr').dataset.ridId;
                        
                        // Update RID data
                        updateRidField(ridId, field, newValue);
                        
                        // Reset styling
                        this.style.backgroundColor = '';
                        this.style.border = '';
                        this.style.color = field === 'ridNumber' ? '#c0991e' : '#8c8487';
                        
                        // Show success message if value changed
                        if (newValue !== originalValue) {
                            showEditSuccessMessage();
                        }
                    });
                    
                    cell.addEventListener('keydown', function(e) {
                        if (e.key === 'Enter') {
                            e.preventDefault();
                            this.blur();
                        } else if (e.key === 'Escape') {
                            e.preventDefault();
                            this.textContent = originalValue;
                            this.blur();
                        }
                    });
                }
            });
        }
        
        // Function to update RID field in localStorage
        function updateRidField(ridId, field, value) {
            const rids = JSON.parse(localStorage.getItem('rids') || '[]');
            const ridIndex = rids.findIndex(r => r.id == ridId);
            
            if (ridIndex !== -1) {
                rids[ridIndex][field] = value;
                localStorage.setItem('rids', JSON.stringify(rids));
            }
        }
        
        // Function to show edit success message
        function showEditSuccessMessage() {
            const existingMessage = document.querySelector('.edit-success-message');
            if (existingMessage) {
                existingMessage.remove();
            }
            
            const successMessage = document.createElement('div');
            successMessage.className = 'edit-success-message fixed top-4 right-4 bg-green-600 text-white px-4 py-2 rounded-lg shadow-lg z-50 text-sm';
            successMessage.textContent = 'Campo atualizado com sucesso!';
            document.body.appendChild(successMessage);
            
            setTimeout(() => {
                successMessage.remove();
            }, 2000);
        }
        
        // Logout from Reports
        document.getElementById('logoutReportsBtn').addEventListener('click', function() {
            document.getElementById('reportsPage').classList.add('hidden');
            document.getElementById('loginPage').classList.remove('hidden');
            document.getElementById('loginForm').reset();
        });
        
        // Download Report Button
        document.getElementById('downloadReportBtn').addEventListener('click', function() {
            generateRIDReport();
        });
        
        // Refresh Report Button
        document.getElementById('refreshReportBtn').addEventListener('click', function() {
            loadReportsPage();
            
            // Show refresh message
            const refreshModal = document.createElement('div');
            refreshModal.className = 'fixed top-4 right-4 bg-blue-600 text-white px-6 py-3 rounded-lg shadow-lg z-50';
            refreshModal.textContent = 'Relatório atualizado!';
            document.body.appendChild(refreshModal);
            
            setTimeout(() => {
                refreshModal.remove();
            }, 2000);
        });

        function showRidDetails(ridId) {
            const rids = JSON.parse(localStorage.getItem('rids') || '[]');
            const rid = rids.find(r => r.id === ridId);
            
            if (!rid) return;
            
            document.getElementById('ridDetailsTitle').textContent = `Detalhes do ${rid.ridNumber}`;
            
            const unidadeNames = {
                'calnamix': 'Calnamix',
                'calpi': 'Calpi',
                'caltins': 'Caltins',
                'formacal': 'Formacal',
                'gessotins': 'Gessotins',
                'imperio-caltins': 'Império Caltins',
                'minerax': 'Minerax',
                'minertins': 'Minertins',
                'natical': 'Natical',
                'nobretins': 'Nobretins',
                'supercal': 'Supercal'
            };
            
            const tipoContratoNames = {
                'funcionario': 'Funcionário',
                'terceiro-contratado': 'Terceiro Contratado',
                'terceiro-eventual': 'Terceiro Eventual',
                'visitante': 'Visitante'
            };
            
            const incidenteNames = {
                'condicao-risco': 'Condição de Risco',
                'desvio-comportamental': 'Desvio Comportamental',
                'dano-material': 'Dano Material',
                'quase-acidente': 'Quase Acidente'
            };
            
            document.getElementById('ridDetailsContent').innerHTML = `
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-semibold mb-1" style="color: #8c8487;">Número do RID</label>
                            <p class="text-lg font-bold" style="color: #c0991e;">${rid.ridNumber}</p>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-semibold mb-1" style="color: #8c8487;">Emitente</label>
                            <p style="color: #797877;">${rid.emitente}</p>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-semibold mb-1" style="color: #8c8487;">Tipo de Contrato</label>
                            <p style="color: #797877;">${tipoContratoNames[rid.tipoContrato] || rid.tipoContrato}</p>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-semibold mb-1" style="color: #8c8487;">Unidade</label>
                            <p style="color: #797877;">${unidadeNames[rid.unidade] || rid.unidade}</p>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-semibold mb-1" style="color: #8c8487;">Setor do Emitente</label>
                            <p style="color: #797877;">${rid.setorEmitente.toUpperCase()}</p>
                        </div>
                    </div>
                    
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-semibold mb-1" style="color: #8c8487;">Data da Ocorrência</label>
                            <p style="color: #797877;">${formatDate(rid.dataOcorrencia)}</p>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-semibold mb-1" style="color: #8c8487;">Tipo de Incidente</label>
                            <p style="color: #797877;">${incidenteNames[rid.incidenteDesvio] || rid.incidenteDesvio}</p>
                        </div>
                        
                        <div>
                            <label for="editPrioridade" class="block text-sm font-semibold mb-1" style="color: #8c8487;">Prioridade</label>
                            <select id="editPrioridade" class="w-full px-3 py-2 border rounded-lg outline-none transition" style="border-color: #aba48f; background-color: #d7d7d6;" onfocus="this.style.borderColor='#c0991e'; this.style.boxShadow='0 0 0 2px rgba(192, 153, 30, 0.2)'" onblur="this.style.borderColor='#aba48f'; this.style.boxShadow='none'">
                                <option value="Crítica" ${rid.prioridade === 'Crítica' ? 'selected' : ''}>Crítica</option>
                                <option value="Alta" ${rid.prioridade === 'Alta' ? 'selected' : ''}>Alta</option>
                                <option value="Média" ${rid.prioridade === 'Média' ? 'selected' : ''}>Média</option>
                                <option value="Baixa" ${rid.prioridade === 'Baixa' ? 'selected' : ''}>Baixa</option>
                            </select>
                        </div>
                        
                        <div>
                            <label for="editStatus" class="block text-sm font-semibold mb-1" style="color: #8c8487;">Status</label>
                            <select id="editStatus" class="w-full px-3 py-2 border rounded-lg outline-none transition" style="border-color: #aba48f; background-color: #d7d7d6;" onfocus="this.style.borderColor='#c0991e'; this.style.boxShadow='0 0 0 2px rgba(192, 153, 30, 0.2)'" onblur="this.style.borderColor='#aba48f'; this.style.boxShadow='none'">
                                <option value="vencido" ${rid.status === 'vencido' ? 'selected' : ''}>Vencido</option>
                                <option value="corrigido" ${rid.status === 'corrigido' ? 'selected' : ''}>Corrigido</option>
                                <option value="em-andamento" ${rid.status === 'em-andamento' ? 'selected' : ''}>Em Andamento</option>
                            </select>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-semibold mb-1" style="color: #8c8487;">Data de Criação</label>
                            <p style="color: #797877;">${formatDate(rid.dataCriacao)}</p>
                        </div>
                    </div>
                </div>
                
                <div class="mt-6 space-y-4">
                    <div>
                        <label class="block text-sm font-semibold mb-2" style="color: #8c8487;">Local da Ocorrência</label>
                        <div class="p-4 rounded-lg" style="background-color: #d7d7d6;">
                            <p style="color: #797877;">${rid.localOcorrencia}</p>
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-semibold mb-2" style="color: #8c8487;">Descrição da Ocorrência</label>
                        <div class="p-4 rounded-lg" style="background-color: #d7d7d6;">
                            <p style="color: #797877;">${rid.descricaoOcorrencia}</p>
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-semibold mb-2" style="color: #8c8487;">Ação Imediata</label>
                        <div class="p-4 rounded-lg" style="background-color: #d7d7d6;">
                            <p style="color: #797877;">${rid.acaoImediata}</p>
                        </div>
                    </div>
                </div>
                
                <div class="mt-8 flex justify-end gap-4">
                    <button onclick="deleteRid(${rid.id})" class="px-6 py-3 rounded-lg font-semibold transition duration-200 transform hover:scale-105 bg-red-600 text-white" onmouseover="this.style.backgroundColor='#dc2626'" onmouseout="this.style.backgroundColor='#dc2626'">
                        Deletar RID
                    </button>
                    <button onclick="updateRid(${rid.id})" class="px-6 py-3 rounded-lg font-semibold transition duration-200 transform hover:scale-105 text-white" style="background-color: #c0991e;" onmouseover="this.style.backgroundColor='#a8821a'" onmouseout="this.style.backgroundColor='#c0991e'">
                        Atualizar
                    </button>
                </div>
            `;
            
            document.getElementById('ridDetailsModal').classList.remove('hidden');
        }
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'99545411b6499096',t:'MTc2MTU5MDQ5NS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
